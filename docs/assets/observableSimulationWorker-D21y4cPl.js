var ci=Object.defineProperty;var fi=(J,D,ae)=>D in J?ci(J,D,{enumerable:!0,configurable:!0,writable:!0,value:ae}):J[D]=ae;var ye=(J,D,ae)=>(fi(J,typeof D!="symbol"?D+"":D,ae),ae);(function(){"use strict";const J="createObservable";var D=(e=>(e.Of="of",e.From="from",e.IIf="iif",e.Interval="interval",e.Ajax="ajax",e.Empty="empty",e.Defer="defer",e.Generate="generate",e.Range="range",e.ThrowError="throwError",e.Timer="timer",e.CombineLatest="combineLatest",e.Merge="merge",e.Concat="concat",e.ForkJoin="forkJoin",e.Race="race",e.Zip="zip",e.Buffer="buffer",e.BufferCount="bufferCount",e.BufferTime="bufferTime",e.BufferToggle="bufferToggle",e.BufferWhen="bufferWhen",e.ConcatMap="concatMap",e.ExhaustMap="exhaustMap",e.Expand="expand",e.MergeMap="mergeMap",e.Map="map",e.Filter="filter",e.Subscriber="subscriber",e.CatchError="catchError",e.Result="result",e.ConnectPoint="connectPoint",e))(D||{});const ae=new Set(["merge","combineLatest","concat","forkJoin","race","zip"]),ge=new Set(["of","from","interval","iif","ajax","empty","defer","generate","range","throwError","timer"]),Nt=new Set(["buffer","bufferCount","bufferTime","bufferToggle","bufferWhen","exhaustMap","expand","map","concatMap","mergeMap"]),Gt=new Set(["filter"]),er=new Set(["catchError"]),je=new Set([...Nt,...Gt,...er]),Pe=new Set([...er,"buffer","bufferToggle","bufferWhen","exhaustMap","expand","iif","defer","from","concatMap","mergeMap"]),qe=new Set(["subscriber"]),Lr=e=>ae.has(e),Cr=e=>ge.has(e),$t=e=>je.has(e),Ye=e=>qe.has(e),Mr=e=>er.has(e),rr=e=>Cr(e)||Lr(e);var Ue=(e=>(e.Array="array",e.Object="object",e))(Ue||{});D.Empty;var tr=(e=>(e.Creation="creation",e.JoinCreation="joinCreation",e.Transformation="transformation",e.Filtering="filtering",e.Join="join",e.Multicasting="multicasting",e.ErrorHandling="errorHandling",e.Utility="utility",e.Conditional="conditional",e.Mathematical="mathematical",e.Subscriber="subscriber",e.Result="result",e.ConnectPoint="connectPoint",e))(tr||{}),ke=(e=>(e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left",e))(ke||{}),Re=(e=>(e.Input="input",e.Output="output",e.Event="event",e))(Re||{});Ue.Array,Ue.Array;function Br(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Br(Object(r),!0).forEach(function(n){Dt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dt(e,t,r){return t=qt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e){var t=Yt(e,"string");return typeof t=="symbol"?t:String(t)}function Yt(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Q=Tr({});function Tr(e){return t.withOptions=r=>Tr(Fr(Fr({},e),r)),t;function t(r,...n){const o=typeof r=="string"?[r]:r.raw,{escapeSpecialCharacters:i=Array.isArray(r)}=e;let s="";for(let h=0;h<o.length;h++){let m=o[h];i&&(m=m.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),s+=m,h<n.length&&(s+=n[h])}const l=s.split(`
`);let p=null;for(const h of l){const m=h.match(/^(\s+)\S+/);if(m){const A=m[1].length;p?p=Math.min(p,A):p=A}}if(p!==null){const h=p;s=l.map(m=>m[0]===" "||m[0]==="	"?m.slice(h):m).join(`
`)}return s=s.trim(),i&&(s=s.replace(/\\n/g,`
`)),s}}Q`function argsFactory() {
		return [1, 2, 3, 4];
	}`,Q`function input() {
		return [1, 2, 3, 4];
	}`,Q`function input() {
		return ${J}();
	}`,Q`function condition() {
		return true;
	}`,Q`function trueResult() {
		return ${J}();
	}`,Q`function falseResult() {
		return ${J}();
	}`,Q`function input() {
		return ${J}();
	}`,Q`function condition(value) {
		return value < 3;
	}`,Q`function iterate(value) {
		return value + 1;
	}`,Q`function resultSelector(value) {
		return value * 1000;
	}`,Q`function errorFactory() {
		return new Error('Unexpected error!');
	}`;var Pr=(e=>(e[e.Milliseconds=0]="Milliseconds",e[e.Date=1]="Date",e))(Pr||{});Q`function predicate() {
		return true;
	}`,Q`function project(value, index) { 
		return value;
	}`,Q`function project(value, index) { 
		return ${J}();
	}`,Q`function project(value, index) { 
		return ${J}();
	}`,Q`function project(value) { 
		return ${J}();
	}`,Q`function closingSelector() { 
		return ${J}();
	}`,Q`function project(value, index) { 
		return ${J}();
	}`,Q`function project(value, index) { 
		return ${J}();
	}`,Q`function selector(err, caught) {
		return ${J}();
	}`,[...ae,...Pe],[...je,...Pe,...qe],[...ge,...ae],Number.POSITIVE_INFINITY;const nr={input:{allowedTypes:new Set([...ae,...Pe]),cardinality:1},output:{allowedTypes:new Set([...je,...Pe,...qe]),cardinality:1}};({...nr,event:[...ae,...ge]},{...nr,event:[...ae,...ge]}),{...nr,event:[...ae,...ge]},{...{...{input:{allowedTypes:new Set([...ae,...ge,...je]),cardinality:1},output:{allowedTypes:new Set([...je,...qe]),cardinality:1}},event:{allowedTypes:new Set([...ge,...ae]),cardinality:1}},event:[...ae,...ge]},[...ae,...ge,...je,...Pe];var Ee=(e=>(e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete",e))(Ee||{}),or=function(e,t){return or=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},or(e,t)};function me(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");or(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ne=function(){return Ne=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ne.apply(this,arguments)};function Ht(e,t,r,n){function o(i){return i instanceof r?i:new r(function(s){s(i)})}return new(r||(r=Promise))(function(i,s){function l(m){try{h(n.next(m))}catch(A){s(A)}}function p(m){try{h(n.throw(m))}catch(A){s(A)}}function h(m){m.done?i(m.value):o(m.value).then(l,p)}h((n=n.apply(e,t||[])).next())})}function ir(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(m){return p([h,m])}}function p(h){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(r=0)),r;)try{if(n=1,o&&(i=h[0]&2?o.return:h[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,h[1])).done)return i;switch(o=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,o=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],o=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function he(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Le(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(l){s={error:l}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function Ce(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Me(e){return this instanceof Me?(this.v=e,this):new Me(e)}function Wt(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(j){n[j]&&(o[j]=function(T){return new Promise(function(E,O){i.push([j,T,E,O])>1||l(j,T)})})}function l(j,T){try{p(n[j](T))}catch(E){A(i[0][3],E)}}function p(j){j.value instanceof Me?Promise.resolve(j.value.v).then(h,m):A(i[0][2],j)}function h(j){l("next",j)}function m(j){l("throw",j)}function A(j,T){j(T),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Jt(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof he=="function"?he(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(s){return new Promise(function(l,p){s=e[i](s),o(l,p,s.done,s.value)})}}function o(i,s,l,p){Promise.resolve(p).then(function(h){i({value:h,done:l})},s)}}typeof SuppressedError=="function"&&SuppressedError;function z(e){return typeof e=="function"}function ar(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var sr=ar(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Ie(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var xe=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var l=he(s),p=l.next();!p.done;p=l.next()){var h=p.value;h.remove(this)}}catch(O){t={error:O}}finally{try{p&&!p.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}else s.remove(this);var m=this.initialTeardown;if(z(m))try{m()}catch(O){i=O instanceof sr?O.errors:[O]}var A=this._finalizers;if(A){this._finalizers=null;try{for(var j=he(A),T=j.next();!T.done;T=j.next()){var E=T.value;try{Rr(E)}catch(O){i=i??[],O instanceof sr?i=Ce(Ce([],Le(i)),Le(O.errors)):i.push(O)}}}catch(O){n={error:O}}finally{try{T&&!T.done&&(o=j.return)&&o.call(j)}finally{if(n)throw n.error}}}if(i)throw new sr(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Rr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Ie(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&Ie(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Ur=xe.EMPTY;function kr(e){return e instanceof xe||e&&"closed"in e&&z(e.remove)&&z(e.add)&&z(e.unsubscribe)}function Rr(e){z(e)?e():e.unsubscribe()}var Nr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Gr={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,Ce([e,t],Le(r)))},clearTimeout:function(e){var t=Gr.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function $r(e){Gr.setTimeout(function(){throw e})}function Be(){}function He(e){e()}var ur=function(e){me(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,kr(r)&&r.add(n)):n.destination=Kt,n}return t.create=function(r,n,o){return new fr(r,n,o)},t.prototype.next=function(r){this.isStopped||this._next(r)},t.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(xe),Vt=Function.prototype.bind;function cr(e,t){return Vt.call(e,t)}var zt=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){We(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){We(n)}else We(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){We(r)}},e}(),fr=function(e){me(t,e);function t(r,n,o){var i=e.call(this)||this,s;if(z(r)||!r)s={next:r??void 0,error:n??void 0,complete:o??void 0};else{var l;i&&Nr.useDeprecatedNextContext?(l=Object.create(r),l.unsubscribe=function(){return i.unsubscribe()},s={next:r.next&&cr(r.next,l),error:r.error&&cr(r.error,l),complete:r.complete&&cr(r.complete,l)}):s=r}return i.destination=new zt(s),i}return t}(ur);function We(e){$r(e)}function Xt(e){throw e}var Kt={closed:!0,next:Be,error:Xt,complete:Be},lr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Se(e){return e}function Zt(e){return e.length===0?Se:e.length===1?e[0]:function(r){return e.reduce(function(n,o){return o(n)},r)}}var Z=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(t,r,n){var o=this,i=en(t)?t:new fr(t,r,n);return He(function(){var s=o,l=s.operator,p=s.source;i.add(l?l.call(i,p):p?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(r){t.error(r)}},e.prototype.forEach=function(t,r){var n=this;return r=Dr(r),new r(function(o,i){var s=new fr({next:function(l){try{t(l)}catch(p){i(p),s.unsubscribe()}},error:i,complete:o});n.subscribe(s)})},e.prototype._subscribe=function(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)},e.prototype[lr]=function(){return this},e.prototype.pipe=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return Zt(t)(this)},e.prototype.toPromise=function(t){var r=this;return t=Dr(t),new t(function(n,o){var i;r.subscribe(function(s){return i=s},function(s){return o(s)},function(){return n(i)})})},e.create=function(t){return new e(t)},e}();function Dr(e){var t;return(t=e??Nr.Promise)!==null&&t!==void 0?t:Promise}function Qt(e){return e&&z(e.next)&&z(e.error)&&z(e.complete)}function en(e){return e&&e instanceof ur||Qt(e)&&kr(e)}function rn(e){return z(e==null?void 0:e.lift)}function ue(e){return function(t){if(rn(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(e,t,r,n,o){return new tn(e,t,r,n,o)}var tn=function(e){me(t,e);function t(r,n,o,i,s,l){var p=e.call(this,r)||this;return p.onFinalize=s,p.shouldUnsubscribe=l,p._next=n?function(h){try{n(h)}catch(m){r.error(m)}}:e.prototype._next,p._error=i?function(h){try{i(h)}catch(m){r.error(m)}finally{this.unsubscribe()}}:e.prototype._error,p._complete=o?function(){try{o()}catch(h){r.error(h)}finally{this.unsubscribe()}}:e.prototype._complete,p}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t}(ur),nn=ar(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),qr=function(e){me(t,e);function t(){var r=e.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return t.prototype.lift=function(r){var n=new Yr(this,this);return n.operator=r,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new nn},t.prototype.next=function(r){var n=this;He(function(){var o,i;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=he(n.currentObservers),l=s.next();!l.done;l=s.next()){var p=l.value;p.next(r)}}catch(h){o={error:h}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}}})},t.prototype.error=function(r){var n=this;He(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var o=n.observers;o.length;)o.shift().error(r)}})},t.prototype.complete=function(){var r=this;He(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(r){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,r)},t.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},t.prototype._innerSubscribe=function(r){var n=this,o=this,i=o.hasError,s=o.isStopped,l=o.observers;return i||s?Ur:(this.currentObservers=null,l.push(r),new xe(function(){n.currentObservers=null,Ie(l,r)}))},t.prototype._checkFinalizedStatuses=function(r){var n=this,o=n.hasError,i=n.thrownError,s=n.isStopped;o?r.error(i):s&&r.complete()},t.prototype.asObservable=function(){var r=new Z;return r.source=this,r},t.create=function(r,n){return new Yr(r,n)},t}(Z),Yr=function(e){me(t,e);function t(r,n){var o=e.call(this)||this;return o.destination=r,o.source=n,o}return t.prototype.next=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,r)},t.prototype.error=function(r){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,r)},t.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},t.prototype._subscribe=function(r){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&o!==void 0?o:Ur},t}(qr),dr={now:function(){return(dr.delegate||Date).now()},delegate:void 0},on=function(e){me(t,e);function t(r,n,o){r===void 0&&(r=1/0),n===void 0&&(n=1/0),o===void 0&&(o=dr);var i=e.call(this)||this;return i._bufferSize=r,i._windowTime=n,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,r),i._windowTime=Math.max(1,n),i}return t.prototype.next=function(r){var n=this,o=n.isStopped,i=n._buffer,s=n._infiniteTimeWindow,l=n._timestampProvider,p=n._windowTime;o||(i.push(r),!s&&i.push(l.now()+p)),this._trimBuffer(),e.prototype.next.call(this,r)},t.prototype._subscribe=function(r){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(r),o=this,i=o._infiniteTimeWindow,s=o._buffer,l=s.slice(),p=0;p<l.length&&!r.closed;p+=i?1:2)r.next(l[p]);return this._checkFinalizedStatuses(r),n},t.prototype._trimBuffer=function(){var r=this,n=r._bufferSize,o=r._timestampProvider,i=r._buffer,s=r._infiniteTimeWindow,l=(s?1:2)*n;if(n<1/0&&l<i.length&&i.splice(0,i.length-l),!s){for(var p=o.now(),h=0,m=1;m<i.length&&i[m]<=p;m+=2)h=m;h&&i.splice(0,h+1)}},t}(qr),an=function(e){me(t,e);function t(r,n){return e.call(this)||this}return t.prototype.schedule=function(r,n){return this},t}(xe),pr={setInterval:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setInterval.apply(void 0,Ce([e,t],Le(r)))},clearInterval:function(e){var t=pr.delegate;return((t==null?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},sn=function(e){me(t,e);function t(r,n){var o=e.call(this,r,n)||this;return o.scheduler=r,o.work=n,o.pending=!1,o}return t.prototype.schedule=function(r,n){var o;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(s,this.id,n),this},t.prototype.requestAsyncId=function(r,n,o){return o===void 0&&(o=0),pr.setInterval(r.flush.bind(r,this),o)},t.prototype.recycleAsyncId=function(r,n,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return n;n!=null&&pr.clearInterval(n)},t.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(r,n);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(r,n){var o=!1,i;try{this.work(r)}catch(s){o=!0,i=s||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,o=r.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ie(i,this),n!=null&&(this.id=this.recycleAsyncId(o,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(an),Hr=function(){function e(t,r){r===void 0&&(r=e.now),this.schedulerActionCtor=t,this.now=r}return e.prototype.schedule=function(t,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,t).schedule(n,r)},e.now=dr.now,e}(),un=function(e){me(t,e);function t(r,n){n===void 0&&(n=Hr.now);var o=e.call(this,r,n)||this;return o.actions=[],o._active=!1,o}return t.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var o;this._active=!0;do if(o=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,o){for(;r=n.shift();)r.unsubscribe();throw o}},t}(Hr),hr=new un(sn),cn=hr,Je=new Z(function(e){return e.complete()});function vr(e){return e&&z(e.schedule)}function br(e){return e[e.length-1]}function yr(e){return z(br(e))?e.pop():void 0}function Ge(e){return vr(br(e))?e.pop():void 0}function fn(e,t){return typeof br(e)=="number"?e.pop():t}var Wr=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Jr(e){return z(e==null?void 0:e.then)}function Vr(e){return z(e[lr])}function zr(e){return Symbol.asyncIterator&&z(e==null?void 0:e[Symbol.asyncIterator])}function Xr(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ln(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Kr=ln();function Zr(e){return z(e==null?void 0:e[Kr])}function Qr(e){return Wt(this,arguments,function(){var r,n,o,i;return ir(this,function(s){switch(s.label){case 0:r=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Me(r.read())];case 3:return n=s.sent(),o=n.value,i=n.done,i?[4,Me(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Me(o)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function et(e){return z(e==null?void 0:e.getReader)}function ne(e){if(e instanceof Z)return e;if(e!=null){if(Vr(e))return dn(e);if(Wr(e))return pn(e);if(Jr(e))return hn(e);if(zr(e))return rt(e);if(Zr(e))return vn(e);if(et(e))return bn(e)}throw Xr(e)}function dn(e){return new Z(function(t){var r=e[lr]();if(z(r.subscribe))return r.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pn(e){return new Z(function(t){for(var r=0;r<e.length&&!t.closed;r++)t.next(e[r]);t.complete()})}function hn(e){return new Z(function(t){e.then(function(r){t.closed||(t.next(r),t.complete())},function(r){return t.error(r)}).then(null,$r)})}function vn(e){return new Z(function(t){var r,n;try{for(var o=he(e),i=o.next();!i.done;i=o.next()){var s=i.value;if(t.next(s),t.closed)return}}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.complete()})}function rt(e){return new Z(function(t){yn(e,t).catch(function(r){return t.error(r)})})}function bn(e){return rt(Qr(e))}function yn(e,t){var r,n,o,i;return Ht(this,void 0,void 0,function(){var s,l;return ir(this,function(p){switch(p.label){case 0:p.trys.push([0,5,6,11]),r=Jt(e),p.label=1;case 1:return[4,r.next()];case 2:if(n=p.sent(),!!n.done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];p.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=p.sent(),o={error:l},[3,11];case 6:return p.trys.push([6,,9,10]),n&&!n.done&&(i=r.return)?[4,i.call(r)]:[3,8];case 7:p.sent(),p.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function ve(e,t,r,n,o){n===void 0&&(n=0),o===void 0&&(o=!1);var i=t.schedule(function(){r(),o?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(i),!o)return i}function tt(e,t){return t===void 0&&(t=0),ue(function(r,n){r.subscribe(X(n,function(o){return ve(n,e,function(){return n.next(o)},t)},function(){return ve(n,e,function(){return n.complete()},t)},function(o){return ve(n,e,function(){return n.error(o)},t)}))})}function nt(e,t){return t===void 0&&(t=0),ue(function(r,n){n.add(e.schedule(function(){return r.subscribe(n)},t))})}function gn(e,t){return ne(e).pipe(nt(t),tt(t))}function mn(e,t){return ne(e).pipe(nt(t),tt(t))}function wn(e,t){return new Z(function(r){var n=0;return t.schedule(function(){n===e.length?r.complete():(r.next(e[n++]),r.closed||this.schedule())})})}function ot(e,t){return new Z(function(r){var n;return ve(r,t,function(){n=e[Kr](),ve(r,t,function(){var o,i,s;try{o=n.next(),i=o.value,s=o.done}catch(l){r.error(l);return}s?r.complete():r.next(i)},0,!0)}),function(){return z(n==null?void 0:n.return)&&n.return()}})}function it(e,t){if(!e)throw new Error("Iterable cannot be null");return new Z(function(r){ve(r,t,function(){var n=e[Symbol.asyncIterator]();ve(r,t,function(){n.next().then(function(o){o.done?r.complete():r.next(o.value)})},0,!0)})})}function En(e,t){return it(Qr(e),t)}function In(e,t){if(e!=null){if(Vr(e))return gn(e,t);if(Wr(e))return wn(e,t);if(Jr(e))return mn(e,t);if(zr(e))return it(e,t);if(Zr(e))return ot(e,t);if(et(e))return En(e,t)}throw Xr(e)}function Oe(e,t){return t?In(e,t):ne(e)}function gr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ge(e);return Oe(e,r)}function xn(e,t){var r=z(e)?e:function(){return e},n=function(o){return o.error(r())};return new Z(t?function(o){return t.schedule(n,0,o)}:n)}function Sn(e){return e instanceof Date&&!isNaN(e)}function re(e,t){return ue(function(r,n){var o=0;r.subscribe(X(n,function(i){n.next(e.call(t,i,o++))}))})}var On=Array.isArray;function An(e,t){return On(t)?e.apply(void 0,Ce([],Le(t))):e(t)}function at(e){return re(function(t){return An(e,t)})}var _n=Array.isArray,jn=Object.getPrototypeOf,Ln=Object.prototype,Cn=Object.keys;function st(e){if(e.length===1){var t=e[0];if(_n(t))return{args:t,keys:null};if(Mn(t)){var r=Cn(t);return{args:r.map(function(n){return t[n]}),keys:r}}}return{args:e,keys:null}}function Mn(e){return e&&typeof e=="object"&&jn(e)===Ln}function ut(e,t){return e.reduce(function(r,n,o){return r[n]=t[o],r},{})}function ct(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ge(e),n=yr(e),o=st(e),i=o.args,s=o.keys;if(i.length===0)return Oe([],r);var l=new Z(Bn(i,r,s?function(p){return ut(s,p)}:Se));return n?l.pipe(at(n)):l}function Bn(e,t,r){return r===void 0&&(r=Se),function(n){ft(t,function(){for(var o=e.length,i=new Array(o),s=o,l=o,p=function(m){ft(t,function(){var A=Oe(e[m],t),j=!1;A.subscribe(X(n,function(T){i[m]=T,j||(j=!0,l--),l||n.next(r(i.slice()))},function(){--s||n.complete()}))},n)},h=0;h<o;h++)p(h)},n)}}function ft(e,t,r){e?ve(r,e,t):t()}function lt(e,t,r,n,o,i,s,l){var p=[],h=0,m=0,A=!1,j=function(){A&&!p.length&&!h&&t.complete()},T=function(O){return h<n?E(O):p.push(O)},E=function(O){i&&t.next(O),h++;var b=!1;ne(r(O,m++)).subscribe(X(t,function(S){o==null||o(S),i?T(S):t.next(S)},function(){b=!0},void 0,function(){if(b)try{h--;for(var S=function(){var M=p.shift();s?ve(t,s,function(){return E(M)}):E(M)};p.length&&h<n;)S();j()}catch(M){t.error(M)}}))};return e.subscribe(X(t,T,function(){A=!0,j()})),function(){l==null||l()}}function $e(e,t,r){return r===void 0&&(r=1/0),z(t)?$e(function(n,o){return re(function(i,s){return t(n,i,o,s)})(ne(e(n,o)))},r):(typeof t=="number"&&(r=t),ue(function(n,o){return lt(n,o,e,r)}))}function dt(e){return e===void 0&&(e=1/0),$e(Se,e)}function Fn(){return dt(1)}function Tn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fn()(Oe(e,Ge(e)))}function de(e){return new Z(function(t){ne(e()).subscribe(t)})}function pt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=yr(e),n=st(e),o=n.args,i=n.keys,s=new Z(function(l){var p=o.length;if(!p){l.complete();return}for(var h=new Array(p),m=p,A=p,j=function(E){var O=!1;ne(o[E]).subscribe(X(l,function(b){O||(O=!0,A--),h[E]=b},function(){return m--},void 0,function(){(!m||!O)&&(A||l.next(i?ut(i,h):h),l.complete())}))},T=0;T<p;T++)j(T)});return r?s.pipe(at(r)):s}function Pn(e,t,r,n,o){var i,s,l,p;arguments.length===1?(i=e,p=i.initialState,t=i.condition,r=i.iterate,s=i.resultSelector,l=s===void 0?Se:s,o=i.scheduler):(p=e,!n||vr(n)?(l=Se,o=n):l=n);function h(){var m;return ir(this,function(A){switch(A.label){case 0:m=p,A.label=1;case 1:return!t||t(m)?[4,l(m)]:[3,4];case 2:A.sent(),A.label=3;case 3:return m=r(m),[3,1];case 4:return[2]}})}return de(o?function(){return ot(h(),o)}:h)}function Un(e,t,r){return de(function(){return e()?t:r})}function ht(e,t,r){e===void 0&&(e=0),r===void 0&&(r=cn);var n=-1;return t!=null&&(vr(t)?r=t:n=t),new Z(function(o){var i=Sn(e)?+e-r.now():e;i<0&&(i=0);var s=0;return r.schedule(function(){o.closed||(o.next(s++),0<=n?this.schedule(void 0,n):o.complete())},i)})}function kn(e,t){return e===void 0&&(e=0),t===void 0&&(t=hr),e<0&&(e=0),ht(e,e,t)}function Rn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Ge(e),n=fn(e,1/0),o=e;return o.length?o.length===1?ne(o[0]):dt(n)(Oe(o,r)):Je}var Nn=Array.isArray;function vt(e){return e.length===1&&Nn(e[0])?e[0]:e}function Gn(e,t){return ue(function(r,n){var o=0;r.subscribe(X(n,function(i){return e.call(t,i,o++)&&n.next(i)}))})}function $n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=vt(e),e.length===1?ne(e[0]):new Z(Dn(e))}function Dn(e){return function(t){for(var r=[],n=function(i){r.push(ne(e[i]).subscribe(X(t,function(s){if(r){for(var l=0;l<r.length;l++)l!==i&&r[l].unsubscribe();r=null}t.next(s)})))},o=0;r&&!t.closed&&o<e.length;o++)n(o)}}function qn(e,t,r){if(t==null&&(t=e,e=0),t<=0)return Je;var n=t+e;return new Z(r?function(o){var i=e;return r.schedule(function(){i<n?(o.next(i++),this.schedule()):o.complete()})}:function(o){for(var i=e;i<n&&!o.closed;)o.next(i++);o.complete()})}function Yn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=yr(e),n=vt(e);return n.length?new Z(function(o){var i=n.map(function(){return[]}),s=n.map(function(){return!1});o.add(function(){i=s=null});for(var l=function(h){ne(n[h]).subscribe(X(o,function(m){if(i[h].push(m),i.every(function(j){return j.length})){var A=i.map(function(j){return j.shift()});o.next(r?r.apply(void 0,Ce([],Le(A))):A),i.some(function(j,T){return!j.length&&s[T]})&&o.complete()}},function(){s[h]=!0,!i[h].length&&o.complete()}))},p=0;!o.closed&&p<n.length;p++)l(p);return function(){i=s=null}}):Je}function Hn(e){return ue(function(t,r){var n=[];return t.subscribe(X(r,function(o){return n.push(o)},function(){r.next(n),r.complete()})),ne(e).subscribe(X(r,function(){var o=n;n=[],r.next(o)},Be)),function(){n=null}})}function Wn(e,t){return t===void 0&&(t=null),t=t??e,ue(function(r,n){var o=[],i=0;r.subscribe(X(n,function(s){var l,p,h,m,A=null;i++%t===0&&o.push([]);try{for(var j=he(o),T=j.next();!T.done;T=j.next()){var E=T.value;E.push(s),e<=E.length&&(A=A??[],A.push(E))}}catch(S){l={error:S}}finally{try{T&&!T.done&&(p=j.return)&&p.call(j)}finally{if(l)throw l.error}}if(A)try{for(var O=he(A),b=O.next();!b.done;b=O.next()){var E=b.value;Ie(o,E),n.next(E)}}catch(S){h={error:S}}finally{try{b&&!b.done&&(m=O.return)&&m.call(O)}finally{if(h)throw h.error}}},function(){var s,l;try{for(var p=he(o),h=p.next();!h.done;h=p.next()){var m=h.value;n.next(m)}}catch(A){s={error:A}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}n.complete()},void 0,function(){o=null}))})}function bt(e){for(var t,r,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=(t=Ge(n))!==null&&t!==void 0?t:hr,s=(r=n[0])!==null&&r!==void 0?r:null,l=n[1]||1/0;return ue(function(p,h){var m=[],A=!1,j=function(O){var b=O.buffer,S=O.subs;S.unsubscribe(),Ie(m,O),h.next(b),A&&T()},T=function(){if(m){var O=new xe;h.add(O);var b=[],S={buffer:b,subs:O};m.push(S),ve(O,i,function(){return j(S)},e)}};s!==null&&s>=0?ve(h,i,T,s,!0):A=!0,T();var E=X(h,function(O){var b,S,M=m.slice();try{for(var _=he(M),x=_.next();!x.done;x=_.next()){var B=x.value,y=B.buffer;y.push(O),l<=y.length&&j(B)}}catch(I){b={error:I}}finally{try{x&&!x.done&&(S=_.return)&&S.call(_)}finally{if(b)throw b.error}}},function(){for(;m!=null&&m.length;)h.next(m.shift().buffer);E==null||E.unsubscribe(),h.complete(),h.unsubscribe()},void 0,function(){return m=null});p.subscribe(E)})}function Jn(e,t){return ue(function(r,n){var o=[];ne(e).subscribe(X(n,function(i){var s=[];o.push(s);var l=new xe,p=function(){Ie(o,s),n.next(s),l.unsubscribe()};l.add(ne(t(i)).subscribe(X(n,p,Be)))},Be)),r.subscribe(X(n,function(i){var s,l;try{for(var p=he(o),h=p.next();!h.done;h=p.next()){var m=h.value;m.push(i)}}catch(A){s={error:A}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}},function(){for(;o.length>0;)n.next(o.shift());n.complete()}))})}function Vn(e){return ue(function(t,r){var n=null,o=null,i=function(){o==null||o.unsubscribe();var s=n;n=[],s&&r.next(s),ne(e()).subscribe(o=X(r,i,Be))};i(),t.subscribe(X(r,function(s){return n==null?void 0:n.push(s)},function(){n&&r.next(n),r.complete()},void 0,function(){return n=o=null}))})}function De(e){return ue(function(t,r){var n=null,o=!1,i;n=t.subscribe(X(r,void 0,void 0,function(s){i=ne(e(s,De(e)(t))),n?(n.unsubscribe(),n=null,i.subscribe(r)):o=!0})),o&&(n.unsubscribe(),n=null,i.subscribe(r))})}function yt(e,t){return z(t)?$e(e,t,1):$e(e,1)}function gt(e,t){return t?function(r){return r.pipe(gt(function(n,o){return ne(e(n,o)).pipe(re(function(i,s){return t(n,i,o,s)}))}))}:ue(function(r,n){var o=0,i=null,s=!1;r.subscribe(X(n,function(l){i||(i=X(n,void 0,function(){i=null,s&&n.complete()}),ne(e(l,o++)).subscribe(i))},function(){s=!0,!i&&n.complete()}))})}function zn(e,t,r){return t===void 0&&(t=1/0),t=(t||0)<1?1/0:t,ue(function(n,o){return lt(n,o,e,t,void 0,!0,r)})}function mt(e,t,r){var n=z(e)||t||r?{next:e,error:t,complete:r}:e;return n?ue(function(o,i){var s;(s=n.subscribe)===null||s===void 0||s.call(n);var l=!0;o.subscribe(X(i,function(p){var h;(h=n.next)===null||h===void 0||h.call(n,p),i.next(p)},function(){var p;l=!1,(p=n.complete)===null||p===void 0||p.call(n),i.complete()},function(p){var h;l=!1,(h=n.error)===null||h===void 0||h.call(n,p),i.error(p)},function(){var p,h;l&&((p=n.unsubscribe)===null||p===void 0||p.call(n)),(h=n.finalize)===null||h===void 0||h.call(n)}))}):Se}let Ve;const Xn=new Uint8Array(16);function Kn(){if(!Ve&&(Ve=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ve))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ve(Xn)}const se=[];for(let e=0;e<256;++e)se.push((e+256).toString(16).slice(1));function Zn(e,t=0){return se[e[t+0]]+se[e[t+1]]+se[e[t+2]]+se[e[t+3]]+"-"+se[e[t+4]]+se[e[t+5]]+"-"+se[e[t+6]]+se[e[t+7]]+"-"+se[e[t+8]]+se[e[t+9]]+"-"+se[e[t+10]]+se[e[t+11]]+se[e[t+12]]+se[e[t+13]]+se[e[t+14]]+se[e[t+15]]}let wt,mr,wr=0,Er=0;function V(e,t,r){let n=t&&r||0;const o=t||new Array(16);e=e||{};let i=e.node||wt,s=e.clockseq!==void 0?e.clockseq:mr;if(i==null||s==null){const j=e.random||(e.rng||Kn)();i==null&&(i=wt=[j[0]|1,j[1],j[2],j[3],j[4],j[5]]),s==null&&(s=mr=(j[6]<<8|j[7])&16383)}let l=e.msecs!==void 0?e.msecs:Date.now(),p=e.nsecs!==void 0?e.nsecs:Er+1;const h=l-wr+(p-Er)/1e4;if(h<0&&e.clockseq===void 0&&(s=s+1&16383),(h<0||l>wr)&&e.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");wr=l,Er=p,mr=s,l+=122192928e5;const m=((l&268435455)*1e4+p)%4294967296;o[n++]=m>>>24&255,o[n++]=m>>>16&255,o[n++]=m>>>8&255,o[n++]=m&255;const A=l/4294967296*1e4&268435455;o[n++]=A>>>8&255,o[n++]=A&255,o[n++]=A>>>24&15|16,o[n++]=A>>>16&255,o[n++]=s>>>8|128,o[n++]=s&255;for(let j=0;j<6;++j)o[n+j]=i[j];return t||Zn(o)}function Qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ze(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Et={exports:{}};(function(e,t){(function(r){e.exports=r()})(function(){return function r(n,o,i){function s(h,m){if(!o[h]){if(!n[h]){var A=typeof ze=="function"&&ze;if(!m&&A)return A(h,!0);if(l)return l(h,!0);throw new Error("Cannot find module '"+h+"'")}m=o[h]={exports:{}},n[h][0].call(m.exports,function(j){var T=n[h][1][j];return s(T||j)},m,m.exports,r,n,o,i)}return o[h].exports}for(var l=typeof ze=="function"&&ze,p=0;p<i.length;p++)s(i[p]);return s}({1:[function(r,n,o){(function(i,s,l,p,h,m,A,j,T){var E=r("crypto");function O(y,I){I=M(y,I);var c;return(c=I.algorithm!=="passthrough"?E.createHash(I.algorithm):new B).write===void 0&&(c.write=c.update,c.end=c.update),x(I,c).dispatch(y),c.update||c.end(""),c.digest?c.digest(I.encoding==="buffer"?void 0:I.encoding):(y=c.read(),I.encoding!=="buffer"?y.toString(I.encoding):y)}(o=n.exports=O).sha1=function(y){return O(y)},o.keys=function(y){return O(y,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},o.MD5=function(y){return O(y,{algorithm:"md5",encoding:"hex"})},o.keysMD5=function(y){return O(y,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var b=E.getHashes?E.getHashes().slice():["sha1","md5"],S=(b.push("passthrough"),["buffer","hex","binary","base64"]);function M(y,I){var c={};if(c.algorithm=(I=I||{}).algorithm||"sha1",c.encoding=I.encoding||"hex",c.excludeValues=!!I.excludeValues,c.algorithm=c.algorithm.toLowerCase(),c.encoding=c.encoding.toLowerCase(),c.ignoreUnknown=I.ignoreUnknown===!0,c.respectType=I.respectType!==!1,c.respectFunctionNames=I.respectFunctionNames!==!1,c.respectFunctionProperties=I.respectFunctionProperties!==!1,c.unorderedArrays=I.unorderedArrays===!0,c.unorderedSets=I.unorderedSets!==!1,c.unorderedObjects=I.unorderedObjects!==!1,c.replacer=I.replacer||void 0,c.excludeKeys=I.excludeKeys||void 0,y===void 0)throw new Error("Object argument required.");for(var d=0;d<b.length;++d)b[d].toLowerCase()===c.algorithm.toLowerCase()&&(c.algorithm=b[d]);if(b.indexOf(c.algorithm)===-1)throw new Error('Algorithm "'+c.algorithm+'"  not supported. supported values: '+b.join(", "));if(S.indexOf(c.encoding)===-1&&c.algorithm!=="passthrough")throw new Error('Encoding "'+c.encoding+'"  not supported. supported values: '+S.join(", "));return c}function _(y){if(typeof y=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(y))!=null}function x(y,I,c){c=c||[];function d(u){return I.update?I.update(u,"utf8"):I.write(u,"utf8")}return{dispatch:function(u){return this["_"+((u=y.replacer?y.replacer(u):u)===null?"null":typeof u)](u)},_object:function(u){var g,w=Object.prototype.toString.call(u),N=/\[object (.*)\]/i.exec(w);if(N=(N=N?N[1]:"unknown:["+w+"]").toLowerCase(),0<=(w=c.indexOf(u)))return this.dispatch("[CIRCULAR:"+w+"]");if(c.push(u),l!==void 0&&l.isBuffer&&l.isBuffer(u))return d("buffer:"),d(u);if(N==="object"||N==="function"||N==="asyncfunction")return w=Object.keys(u),y.unorderedObjects&&(w=w.sort()),y.respectType===!1||_(u)||w.splice(0,0,"prototype","__proto__","constructor"),y.excludeKeys&&(w=w.filter(function(k){return!y.excludeKeys(k)})),d("object:"+w.length+":"),g=this,w.forEach(function(k){g.dispatch(k),d(":"),y.excludeValues||g.dispatch(u[k]),d(",")});if(!this["_"+N]){if(y.ignoreUnknown)return d("["+N+"]");throw new Error('Unknown object type "'+N+'"')}this["_"+N](u)},_array:function(u,k){k=k!==void 0?k:y.unorderedArrays!==!1;var w=this;if(d("array:"+u.length+":"),!k||u.length<=1)return u.forEach(function(G){return w.dispatch(G)});var N=[],k=u.map(function(G){var U=new B,R=c.slice();return x(y,U,R).dispatch(G),N=N.concat(R.slice(c.length)),U.read().toString()});return c=c.concat(N),k.sort(),this._array(k,!1)},_date:function(u){return d("date:"+u.toJSON())},_symbol:function(u){return d("symbol:"+u.toString())},_error:function(u){return d("error:"+u.toString())},_boolean:function(u){return d("bool:"+u.toString())},_string:function(u){d("string:"+u.length+":"),d(u.toString())},_function:function(u){d("fn:"),_(u)?this.dispatch("[native]"):this.dispatch(u.toString()),y.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(u.name)),y.respectFunctionProperties&&this._object(u)},_number:function(u){return d("number:"+u.toString())},_xml:function(u){return d("xml:"+u.toString())},_null:function(){return d("Null")},_undefined:function(){return d("Undefined")},_regexp:function(u){return d("regex:"+u.toString())},_uint8array:function(u){return d("uint8array:"),this.dispatch(Array.prototype.slice.call(u))},_uint8clampedarray:function(u){return d("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(u))},_int8array:function(u){return d("int8array:"),this.dispatch(Array.prototype.slice.call(u))},_uint16array:function(u){return d("uint16array:"),this.dispatch(Array.prototype.slice.call(u))},_int16array:function(u){return d("int16array:"),this.dispatch(Array.prototype.slice.call(u))},_uint32array:function(u){return d("uint32array:"),this.dispatch(Array.prototype.slice.call(u))},_int32array:function(u){return d("int32array:"),this.dispatch(Array.prototype.slice.call(u))},_float32array:function(u){return d("float32array:"),this.dispatch(Array.prototype.slice.call(u))},_float64array:function(u){return d("float64array:"),this.dispatch(Array.prototype.slice.call(u))},_arraybuffer:function(u){return d("arraybuffer:"),this.dispatch(new Uint8Array(u))},_url:function(u){return d("url:"+u.toString())},_map:function(u){return d("map:"),u=Array.from(u),this._array(u,y.unorderedSets!==!1)},_set:function(u){return d("set:"),u=Array.from(u),this._array(u,y.unorderedSets!==!1)},_file:function(u){return d("file:"),this.dispatch([u.name,u.size,u.type,u.lastModfied])},_blob:function(){if(y.ignoreUnknown)return d("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return d("domwindow")},_bigint:function(u){return d("bigint:"+u.toString())},_process:function(){return d("process")},_timer:function(){return d("timer")},_pipe:function(){return d("pipe")},_tcp:function(){return d("tcp")},_udp:function(){return d("udp")},_tty:function(){return d("tty")},_statwatcher:function(){return d("statwatcher")},_securecontext:function(){return d("securecontext")},_connection:function(){return d("connection")},_zlib:function(){return d("zlib")},_context:function(){return d("context")},_nodescript:function(){return d("nodescript")},_httpparser:function(){return d("httpparser")},_dataview:function(){return d("dataview")},_signal:function(){return d("signal")},_fsevent:function(){return d("fsevent")},_tlswrap:function(){return d("tlswrap")}}}function B(){return{buf:"",write:function(y){this.buf+=y},end:function(y){this.buf+=y},read:function(){return this.buf}}}o.writeToStream=function(y,I,c){return c===void 0&&(c=I,I={}),x(I=M(y,I),c).dispatch(y)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(r,n,o){(function(i,s,l,p,h,m,A,j,T){(function(E){var O=typeof Uint8Array<"u"?Uint8Array:Array,b=43,S=47,M=48,_=97,x=65,B=45,y=95;function I(c){return c=c.charCodeAt(0),c===b||c===B?62:c===S||c===y?63:c<M?-1:c<M+10?c-M+26+26:c<x+26?c-x:c<_+26?c-_+26:void 0}E.toByteArray=function(c){var d,u;if(0<c.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var g=c.length,g=c.charAt(g-2)==="="?2:c.charAt(g-1)==="="?1:0,w=new O(3*c.length/4-g),N=0<g?c.length-4:c.length,k=0;function G(U){w[k++]=U}for(d=0;d<N;d+=4,0)G((16711680&(u=I(c.charAt(d))<<18|I(c.charAt(d+1))<<12|I(c.charAt(d+2))<<6|I(c.charAt(d+3))))>>16),G((65280&u)>>8),G(255&u);return g==2?G(255&(u=I(c.charAt(d))<<2|I(c.charAt(d+1))>>4)):g==1&&(G((u=I(c.charAt(d))<<10|I(c.charAt(d+1))<<4|I(c.charAt(d+2))>>2)>>8&255),G(255&u)),w},E.fromByteArray=function(c){var d,u,g,w,N=c.length%3,k="";function G(U){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(U)}for(d=0,g=c.length-N;d<g;d+=3)u=(c[d]<<16)+(c[d+1]<<8)+c[d+2],k+=G((w=u)>>18&63)+G(w>>12&63)+G(w>>6&63)+G(63&w);switch(N){case 1:k=(k+=G((u=c[c.length-1])>>2))+G(u<<4&63)+"==";break;case 2:k=(k=(k+=G((u=(c[c.length-2]<<8)+c[c.length-1])>>10))+G(u>>4&63))+G(u<<2&63)+"="}return k}})(o===void 0?this.base64js={}:o)}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(r,n,o){(function(i,s,b,p,h,m,A,j,T){var E=r("base64-js"),O=r("ieee754");function b(a,f,v){if(!(this instanceof b))return new b(a,f,v);var C,L,P,H,K=typeof a;if(f==="base64"&&K=="string")for(a=(H=a).trim?H.trim():H.replace(/^\s+|\s+$/g,"");a.length%4!=0;)a+="=";if(K=="number")C=q(a);else if(K=="string")C=b.byteLength(a,f);else{if(K!="object")throw new Error("First argument needs to be a number, array or string.");C=q(a.length)}if(b._useTypedArrays?L=b._augment(new Uint8Array(C)):((L=this).length=C,L._isBuffer=!0),b._useTypedArrays&&typeof a.byteLength=="number")L._set(a);else if(Y(H=a)||b.isBuffer(H)||H&&typeof H=="object"&&typeof H.length=="number")for(P=0;P<C;P++)b.isBuffer(a)?L[P]=a.readUInt8(P):L[P]=a[P];else if(K=="string")L.write(a,0,f);else if(K=="number"&&!b._useTypedArrays&&!v)for(P=0;P<C;P++)L[P]=0;return L}function S(a,f,v,C){return b._charsWritten=Qe(function(L){for(var P=[],H=0;H<L.length;H++)P.push(255&L.charCodeAt(H));return P}(f),a,v,C)}function M(a,f,v,C){return b._charsWritten=Qe(function(L){for(var P,H,K=[],oe=0;oe<L.length;oe++)H=L.charCodeAt(oe),P=H>>8,H=H%256,K.push(H),K.push(P);return K}(f),a,v,C)}function _(a,f,v){var C="";v=Math.min(a.length,v);for(var L=f;L<v;L++)C+=String.fromCharCode(a[L]);return C}function x(a,f,v,P){P||(F(typeof v=="boolean","missing or invalid endian"),F(f!=null,"missing offset"),F(f+1<a.length,"Trying to read beyond buffer length"));var L,P=a.length;if(!(P<=f))return v?(L=a[f],f+1<P&&(L|=a[f+1]<<8)):(L=a[f]<<8,f+1<P&&(L|=a[f+1])),L}function B(a,f,v,P){P||(F(typeof v=="boolean","missing or invalid endian"),F(f!=null,"missing offset"),F(f+3<a.length,"Trying to read beyond buffer length"));var L,P=a.length;if(!(P<=f))return v?(f+2<P&&(L=a[f+2]<<16),f+1<P&&(L|=a[f+1]<<8),L|=a[f],f+3<P&&(L+=a[f+3]<<24>>>0)):(f+1<P&&(L=a[f+1]<<16),f+2<P&&(L|=a[f+2]<<8),f+3<P&&(L|=a[f+3]),L+=a[f]<<24>>>0),L}function y(a,f,v,C){if(C||(F(typeof v=="boolean","missing or invalid endian"),F(f!=null,"missing offset"),F(f+1<a.length,"Trying to read beyond buffer length")),!(a.length<=f))return C=x(a,f,v,!0),32768&C?-1*(65535-C+1):C}function I(a,f,v,C){if(C||(F(typeof v=="boolean","missing or invalid endian"),F(f!=null,"missing offset"),F(f+3<a.length,"Trying to read beyond buffer length")),!(a.length<=f))return C=B(a,f,v,!0),2147483648&C?-1*(4294967295-C+1):C}function c(a,f,v,C){return C||(F(typeof v=="boolean","missing or invalid endian"),F(f+3<a.length,"Trying to read beyond buffer length")),O.read(a,f,v,23,4)}function d(a,f,v,C){return C||(F(typeof v=="boolean","missing or invalid endian"),F(f+7<a.length,"Trying to read beyond buffer length")),O.read(a,f,v,52,8)}function u(a,f,v,C,L){if(L||(F(f!=null,"missing value"),F(typeof C=="boolean","missing or invalid endian"),F(v!=null,"missing offset"),F(v+1<a.length,"trying to write beyond buffer length"),_r(f,65535)),L=a.length,!(L<=v))for(var P=0,H=Math.min(L-v,2);P<H;P++)a[v+P]=(f&255<<8*(C?P:1-P))>>>8*(C?P:1-P)}function g(a,f,v,C,L){if(L||(F(f!=null,"missing value"),F(typeof C=="boolean","missing or invalid endian"),F(v!=null,"missing offset"),F(v+3<a.length,"trying to write beyond buffer length"),_r(f,4294967295)),L=a.length,!(L<=v))for(var P=0,H=Math.min(L-v,4);P<H;P++)a[v+P]=f>>>8*(C?P:3-P)&255}function w(a,f,v,C,L){L||(F(f!=null,"missing value"),F(typeof C=="boolean","missing or invalid endian"),F(v!=null,"missing offset"),F(v+1<a.length,"Trying to write beyond buffer length"),jr(f,32767,-32768)),a.length<=v||u(a,0<=f?f:65535+f+1,v,C,L)}function N(a,f,v,C,L){L||(F(f!=null,"missing value"),F(typeof C=="boolean","missing or invalid endian"),F(v!=null,"missing offset"),F(v+3<a.length,"Trying to write beyond buffer length"),jr(f,2147483647,-2147483648)),a.length<=v||g(a,0<=f?f:4294967295+f+1,v,C,L)}function k(a,f,v,C,L){L||(F(f!=null,"missing value"),F(typeof C=="boolean","missing or invalid endian"),F(v!=null,"missing offset"),F(v+3<a.length,"Trying to write beyond buffer length"),kt(f,34028234663852886e22,-34028234663852886e22)),a.length<=v||O.write(a,f,v,C,23,4)}function G(a,f,v,C,L){L||(F(f!=null,"missing value"),F(typeof C=="boolean","missing or invalid endian"),F(v!=null,"missing offset"),F(v+7<a.length,"Trying to write beyond buffer length"),kt(f,17976931348623157e292,-17976931348623157e292)),a.length<=v||O.write(a,f,v,C,52,8)}o.Buffer=b,o.SlowBuffer=b,o.INSPECT_MAX_BYTES=50,b.poolSize=8192,b._useTypedArrays=function(){try{var a=new ArrayBuffer(0),f=new Uint8Array(a);return f.foo=function(){return 42},f.foo()===42&&typeof f.subarray=="function"}catch{return!1}}(),b.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},b.isBuffer=function(a){return!(a==null||!a._isBuffer)},b.byteLength=function(a,f){var v;switch(a+="",f||"utf8"){case"hex":v=a.length/2;break;case"utf8":case"utf-8":v=pe(a).length;break;case"ascii":case"binary":case"raw":v=a.length;break;case"base64":v=Ze(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":v=2*a.length;break;default:throw new Error("Unknown encoding")}return v},b.concat=function(a,f){if(F(Y(a),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),a.length===0)return new b(0);if(a.length===1)return a[0];if(typeof f!="number")for(L=f=0;L<a.length;L++)f+=a[L].length;for(var v=new b(f),C=0,L=0;L<a.length;L++){var P=a[L];P.copy(v,C),C+=P.length}return v},b.prototype.write=function(a,f,v,C){isFinite(f)?isFinite(v)||(C=v,v=void 0):(oe=C,C=f,f=v,v=oe),f=Number(f)||0;var L,P,H,K,oe=this.length-f;switch((!v||oe<(v=Number(v)))&&(v=oe),C=String(C||"utf8").toLowerCase()){case"hex":L=function(be,fe,le,ie){le=Number(le)||0;var ee=be.length-le;(!ie||ee<(ie=Number(ie)))&&(ie=ee),F((ee=fe.length)%2==0,"Invalid hex string"),ee/2<ie&&(ie=ee/2);for(var Te=0;Te<ie;Te++){var Rt=parseInt(fe.substr(2*Te,2),16);F(!isNaN(Rt),"Invalid hex string"),be[le+Te]=Rt}return b._charsWritten=2*Te,Te}(this,a,f,v);break;case"utf8":case"utf-8":P=this,H=f,K=v,L=b._charsWritten=Qe(pe(a),P,H,K);break;case"ascii":case"binary":L=S(this,a,f,v);break;case"base64":P=this,H=f,K=v,L=b._charsWritten=Qe(Ze(a),P,H,K);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":L=M(this,a,f,v);break;default:throw new Error("Unknown encoding")}return L},b.prototype.toString=function(a,f,v){var C,L,P,H,K=this;if(a=String(a||"utf8").toLowerCase(),f=Number(f)||0,(v=v!==void 0?Number(v):K.length)===f)return"";switch(a){case"hex":C=function(oe,be,fe){var le=oe.length;(!be||be<0)&&(be=0),(!fe||fe<0||le<fe)&&(fe=le);for(var ie="",ee=be;ee<fe;ee++)ie+=W(oe[ee]);return ie}(K,f,v);break;case"utf8":case"utf-8":C=function(oe,be,fe){var le="",ie="";fe=Math.min(oe.length,fe);for(var ee=be;ee<fe;ee++)oe[ee]<=127?(le+=Ut(ie)+String.fromCharCode(oe[ee]),ie=""):ie+="%"+oe[ee].toString(16);return le+Ut(ie)}(K,f,v);break;case"ascii":case"binary":C=_(K,f,v);break;case"base64":L=K,H=v,C=(P=f)===0&&H===L.length?E.fromByteArray(L):E.fromByteArray(L.slice(P,H));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":C=function(oe,be,fe){for(var le=oe.slice(be,fe),ie="",ee=0;ee<le.length;ee+=2)ie+=String.fromCharCode(le[ee]+256*le[ee+1]);return ie}(K,f,v);break;default:throw new Error("Unknown encoding")}return C},b.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},b.prototype.copy=function(a,f,v,C){if(f=f||0,(C=C||C===0?C:this.length)!==(v=v||0)&&a.length!==0&&this.length!==0){F(v<=C,"sourceEnd < sourceStart"),F(0<=f&&f<a.length,"targetStart out of bounds"),F(0<=v&&v<this.length,"sourceStart out of bounds"),F(0<=C&&C<=this.length,"sourceEnd out of bounds"),C>this.length&&(C=this.length);var L=(C=a.length-f<C-v?a.length-f+v:C)-v;if(L<100||!b._useTypedArrays)for(var P=0;P<L;P++)a[P+f]=this[P+v];else a._set(this.subarray(v,v+L),f)}},b.prototype.slice=function(a,f){var v=this.length;if(a=R(a,v,0),f=R(f,v,v),b._useTypedArrays)return b._augment(this.subarray(a,f));for(var C=f-a,L=new b(C,void 0,!0),P=0;P<C;P++)L[P]=this[P+a];return L},b.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},b.prototype.set=function(a,f){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,f)},b.prototype.readUInt8=function(a,f){if(f||(F(a!=null,"missing offset"),F(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length))return this[a]},b.prototype.readUInt16LE=function(a,f){return x(this,a,!0,f)},b.prototype.readUInt16BE=function(a,f){return x(this,a,!1,f)},b.prototype.readUInt32LE=function(a,f){return B(this,a,!0,f)},b.prototype.readUInt32BE=function(a,f){return B(this,a,!1,f)},b.prototype.readInt8=function(a,f){if(f||(F(a!=null,"missing offset"),F(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length))return 128&this[a]?-1*(255-this[a]+1):this[a]},b.prototype.readInt16LE=function(a,f){return y(this,a,!0,f)},b.prototype.readInt16BE=function(a,f){return y(this,a,!1,f)},b.prototype.readInt32LE=function(a,f){return I(this,a,!0,f)},b.prototype.readInt32BE=function(a,f){return I(this,a,!1,f)},b.prototype.readFloatLE=function(a,f){return c(this,a,!0,f)},b.prototype.readFloatBE=function(a,f){return c(this,a,!1,f)},b.prototype.readDoubleLE=function(a,f){return d(this,a,!0,f)},b.prototype.readDoubleBE=function(a,f){return d(this,a,!1,f)},b.prototype.writeUInt8=function(a,f,v){v||(F(a!=null,"missing value"),F(f!=null,"missing offset"),F(f<this.length,"trying to write beyond buffer length"),_r(a,255)),f>=this.length||(this[f]=a)},b.prototype.writeUInt16LE=function(a,f,v){u(this,a,f,!0,v)},b.prototype.writeUInt16BE=function(a,f,v){u(this,a,f,!1,v)},b.prototype.writeUInt32LE=function(a,f,v){g(this,a,f,!0,v)},b.prototype.writeUInt32BE=function(a,f,v){g(this,a,f,!1,v)},b.prototype.writeInt8=function(a,f,v){v||(F(a!=null,"missing value"),F(f!=null,"missing offset"),F(f<this.length,"Trying to write beyond buffer length"),jr(a,127,-128)),f>=this.length||(0<=a?this.writeUInt8(a,f,v):this.writeUInt8(255+a+1,f,v))},b.prototype.writeInt16LE=function(a,f,v){w(this,a,f,!0,v)},b.prototype.writeInt16BE=function(a,f,v){w(this,a,f,!1,v)},b.prototype.writeInt32LE=function(a,f,v){N(this,a,f,!0,v)},b.prototype.writeInt32BE=function(a,f,v){N(this,a,f,!1,v)},b.prototype.writeFloatLE=function(a,f,v){k(this,a,f,!0,v)},b.prototype.writeFloatBE=function(a,f,v){k(this,a,f,!1,v)},b.prototype.writeDoubleLE=function(a,f,v){G(this,a,f,!0,v)},b.prototype.writeDoubleBE=function(a,f,v){G(this,a,f,!1,v)},b.prototype.fill=function(a,f,v){if(f=f||0,v=v||this.length,F(typeof(a=typeof(a=a||0)=="string"?a.charCodeAt(0):a)=="number"&&!isNaN(a),"value is not a number"),F(f<=v,"end < start"),v!==f&&this.length!==0){F(0<=f&&f<this.length,"start out of bounds"),F(0<=v&&v<=this.length,"end out of bounds");for(var C=f;C<v;C++)this[C]=a}},b.prototype.inspect=function(){for(var a=[],f=this.length,v=0;v<f;v++)if(a[v]=W(this[v]),v===o.INSPECT_MAX_BYTES){a[v+1]="...";break}return"<Buffer "+a.join(" ")+">"},b.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(b._useTypedArrays)return new b(this).buffer;for(var a=new Uint8Array(this.length),f=0,v=a.length;f<v;f+=1)a[f]=this[f];return a.buffer};var U=b.prototype;function R(a,f,v){return typeof a!="number"?v:f<=(a=~~a)?f:0<=a||0<=(a+=f)?a:0}function q(a){return(a=~~Math.ceil(+a))<0?0:a}function Y(a){return(Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"})(a)}function W(a){return a<16?"0"+a.toString(16):a.toString(16)}function pe(a){for(var f=[],v=0;v<a.length;v++){var C=a.charCodeAt(v);if(C<=127)f.push(a.charCodeAt(v));else for(var L=v,P=(55296<=C&&C<=57343&&v++,encodeURIComponent(a.slice(L,v+1)).substr(1).split("%")),H=0;H<P.length;H++)f.push(parseInt(P[H],16))}return f}function Ze(a){return E.toByteArray(a)}function Qe(a,f,v,C){for(var L=0;L<C&&!(L+v>=f.length||L>=a.length);L++)f[L+v]=a[L];return L}function Ut(a){try{return decodeURIComponent(a)}catch{return""}}function _r(a,f){F(typeof a=="number","cannot write a non-number as a number"),F(0<=a,"specified a negative value for writing an unsigned value"),F(a<=f,"value is larger than maximum value for type"),F(Math.floor(a)===a,"value has a fractional component")}function jr(a,f,v){F(typeof a=="number","cannot write a non-number as a number"),F(a<=f,"value larger than maximum allowed value"),F(v<=a,"value smaller than minimum allowed value"),F(Math.floor(a)===a,"value has a fractional component")}function kt(a,f,v){F(typeof a=="number","cannot write a non-number as a number"),F(a<=f,"value larger than maximum allowed value"),F(v<=a,"value smaller than minimum allowed value")}function F(a,f){if(!a)throw new Error(f||"Failed assertion")}b._augment=function(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=U.get,a.set=U.set,a.write=U.write,a.toString=U.toString,a.toLocaleString=U.toString,a.toJSON=U.toJSON,a.copy=U.copy,a.slice=U.slice,a.readUInt8=U.readUInt8,a.readUInt16LE=U.readUInt16LE,a.readUInt16BE=U.readUInt16BE,a.readUInt32LE=U.readUInt32LE,a.readUInt32BE=U.readUInt32BE,a.readInt8=U.readInt8,a.readInt16LE=U.readInt16LE,a.readInt16BE=U.readInt16BE,a.readInt32LE=U.readInt32LE,a.readInt32BE=U.readInt32BE,a.readFloatLE=U.readFloatLE,a.readFloatBE=U.readFloatBE,a.readDoubleLE=U.readDoubleLE,a.readDoubleBE=U.readDoubleBE,a.writeUInt8=U.writeUInt8,a.writeUInt16LE=U.writeUInt16LE,a.writeUInt16BE=U.writeUInt16BE,a.writeUInt32LE=U.writeUInt32LE,a.writeUInt32BE=U.writeUInt32BE,a.writeInt8=U.writeInt8,a.writeInt16LE=U.writeInt16LE,a.writeInt16BE=U.writeInt16BE,a.writeInt32LE=U.writeInt32LE,a.writeInt32BE=U.writeInt32BE,a.writeFloatLE=U.writeFloatLE,a.writeFloatBE=U.writeFloatBE,a.writeDoubleLE=U.writeDoubleLE,a.writeDoubleBE=U.writeDoubleBE,a.fill=U.fill,a.inspect=U.inspect,a.toArrayBuffer=U.toArrayBuffer,a}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(r,n,o){(function(i,s,E,p,h,m,A,j,T){var E=r("buffer").Buffer,O=4,b=new E(O);b.fill(0),n.exports={hash:function(S,M,_,x){for(var B=M(function(u,g){u.length%O!=0&&(w=u.length+(O-u.length%O),u=E.concat([u,b],w));for(var w,N=[],k=g?u.readInt32BE:u.readInt32LE,G=0;G<u.length;G+=O)N.push(k.call(u,G));return N}(S=E.isBuffer(S)?S:new E(S),x),8*S.length),M=x,y=new E(_),I=M?y.writeInt32BE:y.writeInt32LE,c=0;c<B.length;c++)I.call(y,B[c],4*c,!0);return y}}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(r,n,o){(function(i,s,E,p,h,m,A,j,T){var E=r("buffer").Buffer,O=r("./sha"),b=r("./sha256"),S=r("./rng"),M={sha1:O,sha256:b,md5:r("./md5")},_=64,x=new E(_);function B(u,g){var w=M[u=u||"sha1"],N=[];return w||y("algorithm:",u,"is not yet supported"),{update:function(k){return E.isBuffer(k)||(k=new E(k)),N.push(k),k.length,this},digest:function(k){var G=E.concat(N),G=g?function(U,R,q){E.isBuffer(R)||(R=new E(R)),E.isBuffer(q)||(q=new E(q)),R.length>_?R=U(R):R.length<_&&(R=E.concat([R,x],_));for(var Y=new E(_),W=new E(_),pe=0;pe<_;pe++)Y[pe]=54^R[pe],W[pe]=92^R[pe];return q=U(E.concat([Y,q])),U(E.concat([W,q]))}(w,g,G):w(G);return N=null,k?G.toString(k):G}}}function y(){var u=[].slice.call(arguments).join(" ");throw new Error([u,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}x.fill(0),o.createHash=function(u){return B(u)},o.createHmac=B,o.randomBytes=function(u,g){if(!g||!g.call)return new E(S(u));try{g.call(this,void 0,new E(S(u)))}catch(w){g(w)}};var I,c=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],d=function(u){o[u]=function(){y("sorry,",u,"is not implemented yet")}};for(I in c)d(c[I])}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(r,n,o){(function(i,s,l,p,h,m,A,j,T){var E=r("./helpers");function O(y,I){y[I>>5]|=128<<I%32,y[14+(I+64>>>9<<4)]=I;for(var c=1732584193,d=-271733879,u=-1732584194,g=271733878,w=0;w<y.length;w+=16){var N=c,k=d,G=u,U=g,c=S(c,d,u,g,y[w+0],7,-680876936),g=S(g,c,d,u,y[w+1],12,-389564586),u=S(u,g,c,d,y[w+2],17,606105819),d=S(d,u,g,c,y[w+3],22,-1044525330);c=S(c,d,u,g,y[w+4],7,-176418897),g=S(g,c,d,u,y[w+5],12,1200080426),u=S(u,g,c,d,y[w+6],17,-1473231341),d=S(d,u,g,c,y[w+7],22,-45705983),c=S(c,d,u,g,y[w+8],7,1770035416),g=S(g,c,d,u,y[w+9],12,-1958414417),u=S(u,g,c,d,y[w+10],17,-42063),d=S(d,u,g,c,y[w+11],22,-1990404162),c=S(c,d,u,g,y[w+12],7,1804603682),g=S(g,c,d,u,y[w+13],12,-40341101),u=S(u,g,c,d,y[w+14],17,-1502002290),c=M(c,d=S(d,u,g,c,y[w+15],22,1236535329),u,g,y[w+1],5,-165796510),g=M(g,c,d,u,y[w+6],9,-1069501632),u=M(u,g,c,d,y[w+11],14,643717713),d=M(d,u,g,c,y[w+0],20,-373897302),c=M(c,d,u,g,y[w+5],5,-701558691),g=M(g,c,d,u,y[w+10],9,38016083),u=M(u,g,c,d,y[w+15],14,-660478335),d=M(d,u,g,c,y[w+4],20,-405537848),c=M(c,d,u,g,y[w+9],5,568446438),g=M(g,c,d,u,y[w+14],9,-1019803690),u=M(u,g,c,d,y[w+3],14,-187363961),d=M(d,u,g,c,y[w+8],20,1163531501),c=M(c,d,u,g,y[w+13],5,-1444681467),g=M(g,c,d,u,y[w+2],9,-51403784),u=M(u,g,c,d,y[w+7],14,1735328473),c=_(c,d=M(d,u,g,c,y[w+12],20,-1926607734),u,g,y[w+5],4,-378558),g=_(g,c,d,u,y[w+8],11,-2022574463),u=_(u,g,c,d,y[w+11],16,1839030562),d=_(d,u,g,c,y[w+14],23,-35309556),c=_(c,d,u,g,y[w+1],4,-1530992060),g=_(g,c,d,u,y[w+4],11,1272893353),u=_(u,g,c,d,y[w+7],16,-155497632),d=_(d,u,g,c,y[w+10],23,-1094730640),c=_(c,d,u,g,y[w+13],4,681279174),g=_(g,c,d,u,y[w+0],11,-358537222),u=_(u,g,c,d,y[w+3],16,-722521979),d=_(d,u,g,c,y[w+6],23,76029189),c=_(c,d,u,g,y[w+9],4,-640364487),g=_(g,c,d,u,y[w+12],11,-421815835),u=_(u,g,c,d,y[w+15],16,530742520),c=x(c,d=_(d,u,g,c,y[w+2],23,-995338651),u,g,y[w+0],6,-198630844),g=x(g,c,d,u,y[w+7],10,1126891415),u=x(u,g,c,d,y[w+14],15,-1416354905),d=x(d,u,g,c,y[w+5],21,-57434055),c=x(c,d,u,g,y[w+12],6,1700485571),g=x(g,c,d,u,y[w+3],10,-1894986606),u=x(u,g,c,d,y[w+10],15,-1051523),d=x(d,u,g,c,y[w+1],21,-2054922799),c=x(c,d,u,g,y[w+8],6,1873313359),g=x(g,c,d,u,y[w+15],10,-30611744),u=x(u,g,c,d,y[w+6],15,-1560198380),d=x(d,u,g,c,y[w+13],21,1309151649),c=x(c,d,u,g,y[w+4],6,-145523070),g=x(g,c,d,u,y[w+11],10,-1120210379),u=x(u,g,c,d,y[w+2],15,718787259),d=x(d,u,g,c,y[w+9],21,-343485551),c=B(c,N),d=B(d,k),u=B(u,G),g=B(g,U)}return Array(c,d,u,g)}function b(y,I,c,d,u,g){return B((I=B(B(I,y),B(d,g)))<<u|I>>>32-u,c)}function S(y,I,c,d,u,g,w){return b(I&c|~I&d,y,I,u,g,w)}function M(y,I,c,d,u,g,w){return b(I&d|c&~d,y,I,u,g,w)}function _(y,I,c,d,u,g,w){return b(I^c^d,y,I,u,g,w)}function x(y,I,c,d,u,g,w){return b(c^(I|~d),y,I,u,g,w)}function B(y,I){var c=(65535&y)+(65535&I);return(y>>16)+(I>>16)+(c>>16)<<16|65535&c}n.exports=function(y){return E.hash(y,O,16)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(r,n,o){(function(i,s,l,p,h,m,A,j,T){n.exports=function(E){for(var O,b=new Array(E),S=0;S<E;S++)!(3&S)&&(O=4294967296*Math.random()),b[S]=O>>>((3&S)<<3)&255;return b}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(r,n,o){(function(i,s,l,p,h,m,A,j,T){var E=r("./helpers");function O(M,_){M[_>>5]|=128<<24-_%32,M[15+(_+64>>9<<4)]=_;for(var x,B,y,I=Array(80),c=1732584193,d=-271733879,u=-1732584194,g=271733878,w=-1009589776,N=0;N<M.length;N+=16){for(var k=c,G=d,U=u,R=g,q=w,Y=0;Y<80;Y++){I[Y]=Y<16?M[N+Y]:S(I[Y-3]^I[Y-8]^I[Y-14]^I[Y-16],1);var W=b(b(S(c,5),(W=d,B=u,y=g,(x=Y)<20?W&B|~W&y:!(x<40)&&x<60?W&B|W&y|B&y:W^B^y)),b(b(w,I[Y]),(x=Y)<20?1518500249:x<40?1859775393:x<60?-1894007588:-899497514)),w=g,g=u,u=S(d,30),d=c,c=W}c=b(c,k),d=b(d,G),u=b(u,U),g=b(g,R),w=b(w,q)}return Array(c,d,u,g,w)}function b(M,_){var x=(65535&M)+(65535&_);return(M>>16)+(_>>16)+(x>>16)<<16|65535&x}function S(M,_){return M<<_|M>>>32-_}n.exports=function(M){return E.hash(M,O,20,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(r,n,o){(function(i,s,l,p,h,m,A,j,T){function E(_,x){var B=(65535&_)+(65535&x);return(_>>16)+(x>>16)+(B>>16)<<16|65535&B}function O(_,x){var B,y=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),I=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),c=new Array(64);_[x>>5]|=128<<24-x%32,_[15+(x+64>>9<<4)]=x;for(var d,u,g=0;g<_.length;g+=16){for(var w=I[0],N=I[1],k=I[2],G=I[3],U=I[4],R=I[5],q=I[6],Y=I[7],W=0;W<64;W++)c[W]=W<16?_[W+g]:E(E(E((u=c[W-2],S(u,17)^S(u,19)^M(u,10)),c[W-7]),(u=c[W-15],S(u,7)^S(u,18)^M(u,3))),c[W-16]),B=E(E(E(E(Y,S(u=U,6)^S(u,11)^S(u,25)),U&R^~U&q),y[W]),c[W]),d=E(S(d=w,2)^S(d,13)^S(d,22),w&N^w&k^N&k),Y=q,q=R,R=U,U=E(G,B),G=k,k=N,N=w,w=E(B,d);I[0]=E(w,I[0]),I[1]=E(N,I[1]),I[2]=E(k,I[2]),I[3]=E(G,I[3]),I[4]=E(U,I[4]),I[5]=E(R,I[5]),I[6]=E(q,I[6]),I[7]=E(Y,I[7])}return I}var b=r("./helpers"),S=function(_,x){return _>>>x|_<<32-x},M=function(_,x){return _>>>x};n.exports=function(_){return b.hash(_,O,32,!0)}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(r,n,o){(function(i,s,l,p,h,m,A,j,T){o.read=function(E,O,b,S,g){var _,x,B=8*g-S-1,y=(1<<B)-1,I=y>>1,c=-7,d=b?g-1:0,u=b?-1:1,g=E[O+d];for(d+=u,_=g&(1<<-c)-1,g>>=-c,c+=B;0<c;_=256*_+E[O+d],d+=u,c-=8);for(x=_&(1<<-c)-1,_>>=-c,c+=S;0<c;x=256*x+E[O+d],d+=u,c-=8);if(_===0)_=1-I;else{if(_===y)return x?NaN:1/0*(g?-1:1);x+=Math.pow(2,S),_-=I}return(g?-1:1)*x*Math.pow(2,_-S)},o.write=function(E,O,b,S,M,w){var x,B,y=8*w-M-1,I=(1<<y)-1,c=I>>1,d=M===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=S?0:w-1,g=S?1:-1,w=O<0||O===0&&1/O<0?1:0;for(O=Math.abs(O),isNaN(O)||O===1/0?(B=isNaN(O)?1:0,x=I):(x=Math.floor(Math.log(O)/Math.LN2),O*(S=Math.pow(2,-x))<1&&(x--,S*=2),2<=(O+=1<=x+c?d/S:d*Math.pow(2,1-c))*S&&(x++,S/=2),I<=x+c?(B=0,x=I):1<=x+c?(B=(O*S-1)*Math.pow(2,M),x+=c):(B=O*Math.pow(2,c-1)*Math.pow(2,M),x=0));8<=M;E[b+u]=255&B,u+=g,B/=256,M-=8);for(x=x<<M|B,y+=M;0<y;E[b+u]=255&x,u+=g,x/=256,y-=8);E[b+u-g]|=128*w}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(r,n,o){(function(i,s,l,p,h,m,A,j,T){var E,O,b;function S(){}(i=n.exports={}).nextTick=(O=typeof window<"u"&&window.setImmediate,b=typeof window<"u"&&window.postMessage&&window.addEventListener,O?function(M){return window.setImmediate(M)}:b?(E=[],window.addEventListener("message",function(M){var _=M.source;_!==window&&_!==null||M.data!=="process-tick"||(M.stopPropagation(),0<E.length&&E.shift()())},!0),function(M){E.push(M),window.postMessage("process-tick","*")}):function(M){setTimeout(M,0)}),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=S,i.addListener=S,i.once=S,i.off=S,i.removeListener=S,i.removeAllListeners=S,i.emit=S,i.binding=function(M){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(M){throw new Error("process.chdir is not supported")}}).call(this,r("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},r("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(Et);var eo=Et.exports,ro=Qn(eo);class ${constructor(t,r,n,o=V(),i=null,s=[]){ye(this,"hash");this.raw=t,this.elementId=r,this.type=n,this.id=o,this.subscribeId=i,this.dependencies=s,this.hash=ro({id:o},{algorithm:"md5"})}copy(t){return new $(t,this.elementId,this.type,this.id,this.subscribeId,this.dependencies)}static createSubscribeEvent({elementId:t,id:r=V(),subscribeId:n=null,dependencies:o}){return new $(null,t,Ee.Subscribe,r,n,o)}static createNextEvent({value:t,elementId:r,subscribeId:n,dependencies:o}){return new $(t,r,Ee.Next,V(),n,o)}static createErrorEvent(t,r,n){return new $(t,r,Ee.Error,V(),n)}}class to{constructor(t,r,n,o){this.entryElementId=t,this.elements=r,this.connectLines=n,this.graphBranches=o}getElement(t){const r=this.elements.get(t);if(!r)throw new Error(`Element with id ${t} was not found`);return r}getConnectLine(t){const r=this.connectLines.get(t);if(!r)throw new Error(`Connect line with id ${t} was not found`);return r}getGraphBranch(t){const r=this.graphBranches.get(t);if(!r)throw new Error(`Graph branch with id ${t} was not found`);return r}}function It(e){switch(e.responseType){case"json":{if("response"in e)return e.response;var t=e;return JSON.parse(t.responseText)}case"document":return e.responseXML;case"text":default:{if("response"in e)return e.response;var t=e;return t.responseText}}}var no=function(){function e(t,r,n,o){o===void 0&&(o="download_load"),this.originalEvent=t,this.xhr=r,this.request=n,this.type=o;var i=r.status,s=r.responseType;this.status=i??0,this.responseType=s??"";var l=r.getAllResponseHeaders();this.responseHeaders=l?l.split(`
`).reduce(function(m,A){var j=A.indexOf(": ");return m[A.slice(0,j)]=A.slice(j+2),m},{}):{},this.response=It(r);var p=t.loaded,h=t.total;this.loaded=p,this.total=h}return e}(),Xe=ar(function(e){return function(r,n,o){this.message=r,this.name="AjaxError",this.xhr=n,this.request=o,this.status=n.status,this.responseType=n.responseType;var i;try{i=It(n)}catch{i=n.responseText}this.response=i}}),oo=function(){function e(t,r){return Xe.call(this,"ajax timeout",t,r),this.name="AjaxTimeoutError",this}return e.prototype=Object.create(Xe.prototype),e}();function io(e,t){return Ae({method:"GET",url:e,headers:t})}function ao(e,t,r){return Ae({method:"POST",url:e,body:t,headers:r})}function so(e,t){return Ae({method:"DELETE",url:e,headers:t})}function uo(e,t,r){return Ae({method:"PUT",url:e,body:t,headers:r})}function co(e,t,r){return Ae({method:"PATCH",url:e,body:t,headers:r})}var fo=re(function(e){return e.response});function lo(e,t){return fo(Ae({method:"GET",url:e,headers:t}))}var Ae=function(){var e=function(t){var r=typeof t=="string"?{url:t}:t;return ho(r)};return e.get=io,e.post=ao,e.delete=so,e.put=uo,e.patch=co,e.getJSON=lo,e}(),po="upload",xt="download",Ir="loadstart",xr="progress",St="load";function ho(e){return new Z(function(t){var r,n,o=Ne({async:!0,crossDomain:!1,withCredentials:!1,method:"GET",timeout:0,responseType:"json"},e),i=o.queryParams,s=o.body,l=o.headers,p=o.url;if(!p)throw new TypeError("url is required");if(i){var h;if(p.includes("?")){var m=p.split("?");if(2<m.length)throw new TypeError("invalid url");h=new URLSearchParams(m[1]),new URLSearchParams(i).forEach(function(R,q){return h.set(q,R)}),p=m[0]+"?"+h}else h=new URLSearchParams(i),p=p+"?"+h}var A={};if(l)for(var j in l)l.hasOwnProperty(j)&&(A[j.toLowerCase()]=l[j]);var T=o.crossDomain;!T&&!("x-requested-with"in A)&&(A["x-requested-with"]="XMLHttpRequest");var E=o.withCredentials,O=o.xsrfCookieName,b=o.xsrfHeaderName;if((E||!T)&&O&&b){var S=(n=(r=document==null?void 0:document.cookie.match(new RegExp("(^|;\\s*)("+O+")=([^;]*)")))===null||r===void 0?void 0:r.pop())!==null&&n!==void 0?n:"";S&&(A[b]=S)}var M=vo(s,A),_=Ne(Ne({},o),{url:p,headers:A,body:M}),x;x=e.createXHR?e.createXHR():new XMLHttpRequest;{var B=e.progressSubscriber,y=e.includeDownloadProgress,I=y===void 0?!1:y,c=e.includeUploadProgress,d=c===void 0?!1:c,u=function(R,q){x.addEventListener(R,function(){var Y,W=q();(Y=B==null?void 0:B.error)===null||Y===void 0||Y.call(B,W),t.error(W)})};u("timeout",function(){return new oo(x,_)}),u("abort",function(){return new Xe("aborted",x,_)});var g=function(R,q){return new no(q,x,_,R+"_"+q.type)},w=function(R,q,Y){R.addEventListener(q,function(W){t.next(g(Y,W))})};d&&[Ir,xr,St].forEach(function(R){return w(x.upload,R,po)}),B&&[Ir,xr].forEach(function(R){return x.upload.addEventListener(R,function(q){var Y;return(Y=B==null?void 0:B.next)===null||Y===void 0?void 0:Y.call(B,q)})}),I&&[Ir,xr].forEach(function(R){return w(x,R,xt)});var N=function(R){var q="ajax error"+(R?" "+R:"");t.error(new Xe(q,x,_))};x.addEventListener("error",function(R){var q;(q=B==null?void 0:B.error)===null||q===void 0||q.call(B,R),N()}),x.addEventListener(St,function(R){var q,Y,W=x.status;if(W<400){(q=B==null?void 0:B.complete)===null||q===void 0||q.call(B);var pe=void 0;try{pe=g(xt,R)}catch(Ze){t.error(Ze);return}t.next(pe),t.complete()}else(Y=B==null?void 0:B.error)===null||Y===void 0||Y.call(B,R),N(W)})}var k=_.user,G=_.method,U=_.async;k?x.open(G,p,U,k,_.password):x.open(G,p,U),U&&(x.timeout=_.timeout,x.responseType=_.responseType),"withCredentials"in x&&(x.withCredentials=_.withCredentials);for(var j in A)A.hasOwnProperty(j)&&x.setRequestHeader(j,A[j]);return M?x.send(M):x.send(),function(){x&&x.readyState!==4&&x.abort()}})}function vo(e,t){var r;if(!e||typeof e=="string"||Eo(e)||Io(e)||yo(e)||go(e)||mo(e)||xo(e))return e;if(wo(e))return e.buffer;if(typeof e=="object")return t["content-type"]=(r=t["content-type"])!==null&&r!==void 0?r:"application/json;charset=utf-8",JSON.stringify(e);throw new TypeError("Unknown body type")}var bo=Object.prototype.toString;function Sr(e,t){return bo.call(e)==="[object "+t+"]"}function yo(e){return Sr(e,"ArrayBuffer")}function go(e){return Sr(e,"File")}function mo(e){return Sr(e,"Blob")}function wo(e){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(e)}function Eo(e){return typeof FormData<"u"&&e instanceof FormData}function Io(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function xo(e){return typeof ReadableStream<"u"&&e instanceof ReadableStream}class ce extends Error{constructor(r,n){super(n??`Reference observable missing for element id ${r}`);ye(this,"id",V());this.elementId=r}}class Or extends Error{constructor(r,n){super(n??`Missing next element after element ${r}`);ye(this,"id",V());this.elementId=r}}class Ar extends Error{constructor(r,n,o){super(`Unsupported element type "${o}" in element group "${o}"`);ye(this,"id",V());this.elementId=r,this.elementType=n,this.elementGroup=o}}class Ot extends Error{constructor(r,n){super(`Invalid property "${n}" value for element ${r}`);ye(this,"id",V());this.elementId=r,this.propertyKey=n}}function te(e,t){return r=>e(r,t)}function At(e){return yt(t=>gr(t.raw).pipe(e,re(r=>t.copy(r))))}function we(e){return re(t=>$.createNextEvent({value:t.map(r=>r.raw),elementId:e,dependencies:t.map(r=>r.id)}))}const So=(e,t)=>(r,n)=>{const o=e,i={...o.properties,...r};if(!i.enableObservableEvent){const m=new Function(`return ${i.inputCallbackExpression}`);return Oe(m()()).pipe(re(A=>$.createNextEvent({value:A,elementId:e.id,subscribeId:n})))}if(t.refObservableGenerators.length===0)throw new ce(o.id,"Reference observable is required for from operator");if(t.refObservableGenerators.length>1)throw new Error("Too many reference observables for from operator");const[s]=t.refObservableGenerators,l=V(),p=te(s.observableGenerator,l),h=new Function(J,`return ${i.observableFactory}`)(p);return de(()=>{var m;return(m=s.onSubscribe)==null||m.call(s,$.createSubscribeEvent({elementId:o.id,id:l,subscribeId:n})),Oe(h())})},Oo=e=>(t,r)=>{const o={...e.properties,...t},s=new Function(`return ${o.argsFactoryExpression}`)()();return(Array.isArray(s)?gr(...s):gr(s)).pipe(re(p=>$.createNextEvent({value:p,elementId:e.id,subscribeId:r})))},Ao=e=>(t,r)=>{const n=e,o={...n.properties,...t};return kn(o.period).pipe(re(i=>$.createNextEvent({value:i,elementId:n.id,subscribeId:r})))},_o=(e,t)=>(r,n)=>{const o=e,i={...o.properties,...r},s=new Function(`return ${o.properties.conditionExpression}`),l=t.refObservableGenerators.find(({connectPoint:E})=>E.connectPointType===Re.Event&&E.connectPosition===ke.Top);if(!l)throw new ce(o.id,"Not found true branch observable operator");const p=t.refObservableGenerators.find(({connectPoint:E})=>E.connectPointType===Re.Event&&E.connectPosition===ke.Bottom);if(!p)throw new ce(o.id,"Not found false branch observable operator");const h=V(),m=te(l.observableGenerator,h),A=new Function(J,`return ${i.trueCallbackExpression}`)(m),j=te(p.observableGenerator,h),T=new Function(J,`return ${i.falseCallbackExpression}`)(j);return Un(s(),de(()=>{var E;return(E=l.onSubscribe)==null||E.call(l,$.createSubscribeEvent({elementId:o.id,id:h,subscribeId:n})),A()}),de(()=>{var E;return(E=p.onSubscribe)==null||E.call(p,$.createSubscribeEvent({elementId:o.id,id:h,subscribeId:n})),T()}))},jo=e=>(t,r)=>{const n=e,o={...n.properties,...t},{url:i,method:s,headers:l,queryParams:p,responseType:h,timeout:m,body:A}=o;let j;try{j=A?JSON.parse(A):void 0}catch{throw new Ot(n.id,"body")}const T=l==null?void 0:l.reduce((b,[S,M])=>({...b,[S]:M}),{}),O=[...((p==null?void 0:p.reduce((b,[S,M])=>{const _=b.get(S);return _===void 0?b.set(S,M):Array.isArray(_)?b.set(S,[..._,M]):b.set(S,[_,M])},new Map))??new Map).entries()].reduce((b,[S,M])=>({...b,[S]:M}),{});return Ae({url:i,method:s,headers:T,queryParams:O,responseType:h,timeout:m,body:j}).pipe(re(b=>$.createNextEvent({value:b,elementId:n.id,subscribeId:r})))},Lo=e=>(t,r)=>Je.pipe(re(n=>$.createNextEvent({value:n,elementId:e.id,subscribeId:r}))),Co=(e,t)=>(r,n)=>{if(t.refObservableGenerators.length===0)throw new ce(e.id,"Reference observable is required for defer operator");if(t.refObservableGenerators.length>1)throw new Error("Too many reference observables for defer operator");const o=e,[i]=t.refObservableGenerators,s=V(),l=te(i.observableGenerator,s),p=new Function(J,`return ${e.properties.observableFactory}`)(l);return de(()=>{var h;return(h=i.onSubscribe)==null||h.call(i,$.createSubscribeEvent({elementId:o.id,id:s,subscribeId:n})),p()})},Mo=e=>(t,r)=>{const n=e,o={...n.properties,...t},{initialState:i,iterate:s,resultSelector:l,condition:p}=o,h=new Function(`return ${i}`),m=p?new Function(`return ${p}`):void 0,A=new Function(`return ${s}`),j=new Function(`return ${l}`);return Pn({initialState:h(),condition:m==null?void 0:m(),iterate:A(),resultSelector:j()}).pipe(re(T=>$.createNextEvent({value:T,elementId:n.id,subscribeId:r})))},Bo=e=>(t,r)=>{const n=e,o={...n.properties,...t},i=new Function(`return ${o.errorOrErrorFactory}`)();return xn(i).pipe(De(s=>{throw $.createErrorEvent(s,n.id,r)}))},Fo=e=>(t,r)=>{const n=e,o={...n.properties,...t};return qn(o.start,o.count).pipe(re(i=>$.createNextEvent({value:i,elementId:n.id,subscribeId:r})))},To=e=>(t,r)=>{const n=e,o={...n.properties,...t},i=o.dueDateType===Pr.Date?new Date(o.startDue):o.startDue;return ht(i,o.intervalDuration).pipe(re(s=>$.createNextEvent({value:s,elementId:n.id,subscribeId:r})))},_t=new Map([[D.Ajax,jo],[D.Defer,Co],[D.Empty,Lo],[D.From,So],[D.Generate,Mo],[D.IIf,_o],[D.Interval,Ao],[D.Of,Oo],[D.Range,Fo],[D.ThrowError,Bo],[D.Timer,To]]),Po={create(e,t){const r=_t.get(e.type);if(!r)throw new Ar(e.id,e.type,tr.Creation);return r(e,t)},isSupported(e){return _t.has(e.type)}},Uo=(e,t)=>r=>{var l;if(t.refObservableGenerators.length===0)throw new ce(e.id,"Reference observable is required for buffer operator");if(t.refObservableGenerators.length>1)throw new Error("Too many reference observables for buffer operator");const n=V(),[o]=t.refObservableGenerators,i=te(o.observableGenerator,n);(l=o.onSubscribe)==null||l.call(o,$.createSubscribeEvent({elementId:e.id,id:n}));const s=[];return r.pipe(Hn(i().pipe(mt(p=>s.push(p.id)))),re(p=>{const h=s.shift(),m=p.map(A=>A.id);return $.createNextEvent({value:p.map(A=>A.raw),elementId:e.id,dependencies:h?[...m,h]:m})}))},ko=e=>t=>{const{properties:r}=e;return t.pipe(Wn(r.bufferSize,r.startBufferEvery),we(e.id))},Ro=e=>t=>{const{properties:r}=e;return r.maxBufferSize?t.pipe(bt(r.bufferTimeSpan,r.bufferCreationInterval,r.maxBufferSize),we(e.id)):t.pipe(bt(r.bufferTimeSpan,r.bufferCreationInterval),we(e.id))},No=(e,t)=>r=>{var m;const n=t.refObservableGenerators.find(({connectPoint:A})=>A.connectPointType===Re.Event&&A.connectPosition===ke.Top);if(!n)throw new ce(e.id,"Not found source branch observable operator");const o=t.refObservableGenerators.find(({connectPoint:A})=>A.connectPointType===Re.Event&&A.connectPosition===ke.Bottom);if(!o)throw new ce(e.id,"Not found closing branch observable operator");const i=V(),{properties:s}=e,l=te(n.observableGenerator,i),p=te(o.observableGenerator,i),h=new Function(J,`return ${s.closingSelectorExpression}`)(p);return(m=n.onSubscribe)==null||m.call(n,$.createSubscribeEvent({elementId:e.id,id:i})),r.pipe(Jn(l(),A=>{var T;const j=V();return(T=o.onSubscribe)==null||T.call(o,$.createSubscribeEvent({elementId:e.id,id:j,dependencies:[A.id]})),h(A.raw)}),we(e.id))},Go=(e,t)=>r=>{if(t.refObservableGenerators.length===0)throw new ce(e.id,"Reference observable is required for bufferWhen operator");if(t.refObservableGenerators.length>1)throw new Error("Too many reference observables for bufferWhen operator");return r.pipe(Vn(()=>{var l;const n=V(),[o]=t.refObservableGenerators,i=te(o.observableGenerator,n),s=new Function(J,`return ${e.properties.closingSelectorExpression}`)(i);return(l=o.onSubscribe)==null||l.call(o,$.createSubscribeEvent({elementId:e.id,id:n})),s()}),we(e.id))},$o=(e,t)=>r=>{if(t.refObservableGenerators.length===0)throw new ce(e.id,"Reference observable is required for concatMap operator");if(t.refObservableGenerators.length>1)throw new Error("Too many reference observables for concatMap operator");const[n]=t.refObservableGenerators;return r.pipe(yt((o,i)=>{var h;const s=V(),l=te(n.observableGenerator,s),p=new Function(J,`return ${e.properties.projectExpression}`)(l);return(h=n.onSubscribe)==null||h.call(n,$.createSubscribeEvent({elementId:e.id,id:s,dependencies:[o.id]})),p(o.raw,i)}))},Do=e=>t=>{const r=e,n=new Function(`return ${r.properties.projectExpression}`);return t.pipe(At(re(n())))},qo=(e,t)=>r=>{if(t.refObservableGenerators.length===0)throw new ce(e.id,"Reference observable is required for mergeMap operator");if(t.refObservableGenerators.length>1)throw new Error("Too many reference observables for mergeMap operator");const[n]=t.refObservableGenerators,{properties:o}=e;return r.pipe($e((i,s)=>{var m;const l=V(),p=te(n.observableGenerator,l),h=new Function(J,`return ${o.projectExpression}`)(p);return(m=n.onSubscribe)==null||m.call(n,$.createSubscribeEvent({elementId:e.id,id:l,dependencies:[i.id]})),h(i.raw,s)},o.concurrent))},Yo=(e,t)=>r=>{if(t.refObservableGenerators.length===0)throw new ce(e.id,"Reference observable is required for exhaust operator");if(t.refObservableGenerators.length>1)throw new Error("Too many reference observables for exhaust operator");const{properties:n}=e,[o]=t.refObservableGenerators;return r.pipe(gt((i,s)=>{var m;const l=V(),p=te(o.observableGenerator,l),h=new Function(J,`return ${n.projectExpression}`)(p);return(m=o.onSubscribe)==null||m.call(o,$.createSubscribeEvent({elementId:e.id,id:l,dependencies:[i.id]})),h(i.raw,s)}))},Ho=(e,t)=>r=>{if(t.refObservableGenerators.length===0)throw new ce(e.id,"Reference observable is required for expand operator");if(t.refObservableGenerators.length>1)throw new Error("Too many reference observables for expand operator");const{properties:n}=e,[o]=t.refObservableGenerators;return r.pipe(zn((i,s)=>{var m;const l=V(),p=te(o.observableGenerator,l),h=new Function(J,`return ${n.projectExpression}`)(p);return(m=o.onSubscribe)==null||m.call(o,$.createSubscribeEvent({elementId:e.id,id:l,dependencies:[i.id]})),h(i.raw,s)},n.concurrent))},jt=new Map([[D.Buffer,Uo],[D.BufferCount,ko],[D.BufferTime,Ro],[D.BufferToggle,No],[D.BufferWhen,Go],[D.ConcatMap,$o],[D.Map,Do],[D.MergeMap,qo],[D.ExhaustMap,Yo],[D.Expand,Ho]]),Wo={create(e,t){const r=jt.get(e.type);if(!r)throw new Error(`Unsupported element type ${e.type} as pipe operator.`);return r(e,t)},isSupported(e){return jt.has(e.type)}},Jo=e=>t=>{const r=e,n=new Function(`return ${r.properties.predicateExpression}`);return t.pipe(At(Gn(n())))},Lt=new Map([[D.Filter,Jo]]),Vo={create(e,t){const r=Lt.get(e.type);if(!r)throw new Error(`Unsupported element type ${e.type} as pipe operator.`);return r(e,t)},isSupported(e){return Lt.has(e.type)}},zo=(e,t)=>r=>{if(t.refObservableGenerators.length===0)throw new ce(e.id,"Reference observable is required for catchError operator");if(t.refObservableGenerators.length>1)throw new Error("Too many reference observables for catchError operator");const n=V(),o=e,[i]=t.refObservableGenerators,s=te(i.observableGenerator,n),l=new Function(J,`return ${o.properties.selectorExpression}`)(s);return r.pipe(De((p,h)=>{var A;(A=i.onSubscribe)==null||A.call(i,$.createSubscribeEvent({elementId:o.id,id:n,dependencies:[p.id]}));const m=h.pipe(re(j=>j.raw));return l(p.raw,m)}))},Ct=new Map([[D.CatchError,zo]]),Mt=[Wo,Vo,{create(e,t){const r=Ct.get(e.type);if(!r)throw new Error(`Unsupported element type ${e.type} as pipe operator.`);return r(e,t)},isSupported(e){return Ct.has(e.type)}}],Xo={create(e,t){const r=Mt.find(n=>n.isSupported(e));if(!r)throw new Error(`Unsupported element type ${e.type} as pipe operator.`);return r.create(e,t)},isSupported(e){return Mt.some(t=>t.isSupported(e))}};var Ke=(e=>(e[e.Direct=0]="Direct",e[e.Reference=1]="Reference",e))(Ke||{});class Ko{constructor(t,r){this.elements=t,this.cls=r}createObservableGraph(t){const r=new Map;return this.createGraph(t,r),r}createGraph(t,r){if(r.has(t))return;const n=this.createGraphBranch(t),o=n.flatMap(i=>i.edges).filter(i=>i.type===1).reduce((i,s)=>i.add(s.targetNodeId),new Set);r.set(t,{nodes:n,refNodeIds:o});for(const i of o)this.createGraph(i,r)}createGraphBranch(t){const r=this.elements.get(t);if(!r)throw new Error(`Element with id ${t} was not found`);if(Ye(r.type))return[{id:r.id,edges:[]}];const o=this.cls.get(r.id)??[];if(!o.length)throw new Or(r.id,`Element ${r.id} has no next element`);const i=o.map(l=>{const p=this.elements.get(l.target.id);if(!p)throw new Error(`Failed to find next element with id ${l.target.id}`);return{id:l.id,sourceNodeId:r.id,targetNodeId:p.id,type:this.isReferenceElementType(p.type)?1:0}}),s=i.filter(l=>l.type===0);if(s.length!==1)throw s.length===0?new Or(r.id,`Element ${r.id} has no next element`):new Error(`Unexpected number(${s.length}) direct edges`);return[{id:r.id,edges:i},...this.createGraphBranch(s[0].targetNodeId)]}isReferenceElementType(t){return rr(t)}}function Bt(e,t,r,n){return t.map(o=>de(()=>{var l;const i=V();return(l=o.onSubscribe)==null||l.call(o,$.createSubscribeEvent({elementId:e,id:i,subscribeId:n})),te(o.observableGenerator,i)(r)}))}function Ft(e,t,r,n){return t.reduce((o,i)=>({...o,[i.connectLine.name]:de(()=>{var p;const s=V();return(p=i.onSubscribe)==null||p.call(i,$.createSubscribeEvent({elementId:e,id:s,subscribeId:n})),te(i.observableGenerator,s)(r)})}),{})}function Tt(e,t){const r=Object.entries(e).reduce((o,[i,s])=>({...o,[i]:s.raw}),{}),n=Object.values(e).map(o=>o.id);return $.createNextEvent({value:r,elementId:t,dependencies:n})}const Zo=(e,t)=>(r,n)=>{const o=e,i={...o.properties,...r};return Rn(...t.refObservableGenerators.map(s=>de(()=>{var h;const l=V();return(h=s.onSubscribe)==null||h.call(s,$.createSubscribeEvent({elementId:o.id,id:l,subscribeId:n})),te(s.observableGenerator,l)()}),i.limitConcurrent>0?i.limitConcurrent:void 0))},Qo=(e,t)=>(r,n)=>{const o=e;return o.properties.observableInputsType===Ue.Array?ct(Bt(o.id,t.refObservableGenerators,r,n)).pipe(we(o.id)):ct(Ft(o.id,t.refObservableGenerators,r,n)).pipe(re(i=>Tt(i,o.id)))},ei=(e,t)=>(r,n)=>Tn(...t.refObservableGenerators.map(o=>de(()=>{var l;const i=V();return(l=o.onSubscribe)==null||l.call(o,$.createSubscribeEvent({elementId:e.id,id:i,subscribeId:n})),te(o.observableGenerator,i)(r)}))),ri=(e,t)=>(r,n)=>{const o=e;return o.properties.observableInputsType===Ue.Array?pt(Bt(o.id,t.refObservableGenerators,r,n)).pipe(we(o.id)):pt(Ft(o.id,t.refObservableGenerators,r,n)).pipe(re(i=>Tt(i,o.id)))},ti=(e,t)=>(r,n)=>$n(t.refObservableGenerators.map(o=>de(()=>{var l;const i=V();return(l=o.onSubscribe)==null||l.call(o,$.createSubscribeEvent({elementId:e.id,id:i,subscribeId:n})),te(o.observableGenerator,i)(r)}))),ni=(e,t)=>(r,n)=>Yn(t.refObservableGenerators.map(o=>de(()=>{var l;const i=V();return(l=o.onSubscribe)==null||l.call(o,$.createSubscribeEvent({elementId:e.id,id:i,subscribeId:n})),te(o.observableGenerator,i)(r)}))).pipe(we(e.id)),Pt=new Map([[D.Merge,Zo],[D.CombineLatest,Qo],[D.Concat,ei],[D.ForkJoin,ri],[D.Race,ti],[D.Zip,ni]]),oi={create(e,t){const r=Pt.get(e.type);if(!r)throw new Ar(e.id,e.type,tr.JoinCreation);return r(e,t)},isSupported(e){return Pt.has(e.type)}};class ii{constructor(t,r){this.simulationModel=t,this.flowManager=r}createObservable(){const{entryElementId:t}=this.simulationModel,r=new Map,n=[t];for(;n.length>0;){const i=n[0],s=this.simulationModel.getGraphBranch(i),l=[...s.refNodeIds].filter(p=>!r.has(p));if(l.length>0){n.unshift(...l);continue}r.set(i,this.createBranchObservable(s,r)),n.shift()}const o=r.get(t);if(!o)throw new Error(`Failed to generate observable for element with id ${t}`);return o()}createBranchObservable(t,r){const{entryElementId:n}=this.simulationModel,[o,i]=t.nodes.reduce(([T,E],O)=>{const b=this.simulationModel.getElement(O.id),S={element:b,node:O};return rr(b.type)?[[...T,S],E]:[T,[...E,S]]},[[],[]]);if(o.length===0)throw new Error("Entry node not found");if(o.length>1)throw new Error("Multiple creation nodes found");const s=o[0],l=s.element.id===n,p=this.getRefObservableGenerators(s.node,r),h=this.createEntryOperator(s.element,p),m=s.node.edges.filter(T=>T.type===Ke.Direct).flatMap(T=>{const E=this.simulationModel.getElement(T.targetNodeId),O=this.simulationModel.getConnectLine(T.id),b=l&&Ye(E.type)?this.createUnhandledErrorOperator(O):this.createErrorTrackerOperator(O);return[this.createControlOperator(O),b]}),A=i.flatMap(({element:T,node:E})=>{const O=this.getRefObservableGenerators(E,r),b=[];return $t(T.type)&&b.push(this.createPipeOperator(T,O)),E.edges.filter(S=>S.type===Ke.Direct).reduce((S,M)=>{const _=this.simulationModel.getElement(M.targetNodeId),x=this.simulationModel.getConnectLine(M.id),B=l&&Ye(_.type)?this.createUnhandledErrorOperator(x):this.createErrorTrackerOperator(x);return[...S,this.createControlOperator(x),B]},b)}),j=[...m,...A];return(T,E)=>j.reduce((O,b)=>b(O),h(T,E))}createEntryOperator(t,r){const n=r.map(o=>({connectPoint:o.connectLine.source,connectLine:o.connectLine,observableGenerator:o.observableGenerator,onSubscribe:i=>this.flowManager.handleNextEvent(i,o.connectLine)})).sort((o,i)=>o.connectLine.index-i.connectLine.index);if(Cr(t.type))return Po.create(t,{refObservableGenerators:n});if(Lr(t.type))return oi.create(t,{refObservableGenerators:n});throw new Error(`Unsupported entry operator type ${t.type}`)}createPipeOperator(t,r){return Xo.create(t,{refObservableGenerators:r.map(n=>({connectPoint:n.connectLine.source,connectLine:n.connectLine,observableGenerator:n.observableGenerator,onSubscribe:o=>this.flowManager.handleNextEvent(o,n.connectLine)})).sort((n,o)=>n.connectLine.index-o.connectLine.index)})}getRefObservableGenerators(t,r){return t.edges.filter(n=>n.type===Ke.Reference).map(n=>{const o=r.get(n.targetNodeId),i=this.simulationModel.getConnectLine(n.id);if(!o)throw new Error(`Observable for element with id not found ${n.targetNodeId}`);return{observableGenerator:o,connectLine:i}})}createControlOperator(t){return r=>r.pipe(mt(n=>this.flowManager.handleNextEvent(n,t)))}createErrorTrackerOperator(t){return r=>r.pipe(De(n=>{const o=n instanceof $?n:new $(n,t.source.id,Ee.Error);throw this.flowManager.handleError(o,t),o}))}createUnhandledErrorOperator(t){return r=>r.pipe(De(n=>{const o=n instanceof $?n:new $(n,t.source.id,Ee.Error);throw this.flowManager.handleFatalError(o,t),o.raw}))}}class ai{constructor(t){ye(this,"eventIndex",0);ye(this,"eventObserver",new on(1e4));ye(this,"connectLinesPath",new Map);this.simulationModel=t}asObservable(){return this.eventObserver.asObservable()}handleNextEvent(t,r){const{target:n}=r,o=this.simulationModel.getElement(n.id),i=this.retrieveFlowValuePath(t.id);if(i.push(r),Mr(o.type))return;const s=i[0],l=i[i.length-1];this.eventObserver.next({id:t.id,subscribeId:t.subscribeId,dependencies:t.dependencies,index:++this.eventIndex,hash:t.hash,value:`${t.raw}`,type:t.type,connectLinesId:i.splice(0).map(p=>p.id),sourceElementId:s.source.id,targetElementId:l.target.id})}handleError(t,r){const{target:n}=r,o=this.simulationModel.getElement(n.id),i=this.retrieveFlowValuePath(t.id);if(i.push(r),!Mr(o.type)&&!Ye(o.type))return;const s=i[0],l=i[i.length-1];this.eventObserver.next({id:t.id,subscribeId:t.subscribeId,dependencies:t.dependencies,index:++this.eventIndex,hash:t.hash,value:`${t.raw}`,type:t.type,connectLinesId:i.splice(0).map(p=>p.id),sourceElementId:s.source.id,targetElementId:l.target.id})}handleFatalError(t,r){const n=this.retrieveFlowValuePath(t.id);n.push(r);const o=n[0],i=n[n.length-1];this.eventObserver.error({id:t.id,index:++this.eventIndex,hash:t.hash,value:t,connectLinesId:n.splice(0).map(s=>s.id),sourceElementId:o.source.id,targetElementId:i.target.id})}handleComplete(){this.eventObserver.complete()}retrieveFlowValuePath(t){let r=this.connectLinesPath.get(t);return r||(r=[],this.connectLinesPath.set(t,r)),r}}function si(e,t,r){const n=t.reduce((p,h)=>p.set(h.id,h),new Map),o=r.reduce((p,h)=>{const m=p.get(h.source.id)??[];return p.set(h.source.id,[...m,h])},new Map),i=n.get(e);if(!i||!rr(i.type))throw new Error("Invalid entry element. Only creation elements are allowed");const l=new Ko(n,o).createObservableGraph(e);return new to(e,n,r.reduce((p,h)=>p.set(h.id,h),new Map),l)}class ui{constructor(t){ye(this,"subscription",null);this.simulationModel=t}start(t){const r=new ai(this.simulationModel),i=new ii(this.simulationModel,r).createObservable().subscribe({complete:()=>r.handleComplete()}),s=r.asObservable().subscribe(t);return this.subscription={unsubscribe:()=>{i.unsubscribe(),s.unsubscribe()}},this.subscription}stop(){var t;(t=this.subscription)==null||t.unsubscribe(),this.subscription=null}}var Fe=(e=>(e.StartSimulation="startSimulation",e.StopSimulation="stopSimulation",e.Next="next",e.Error="error",e.Complete="complete",e.CreationError="creationError",e))(Fe||{});let _e;self.addEventListener("message",function(e){if(e.data.type===Fe.StopSimulation){_e==null||_e.stop(),_e=null;return}if(!_e)try{const t=e.data;_e=new ui(si(t.entryElementId,t.elements,t.connectLines)),_e.start({next:r=>self.postMessage({type:Fe.Next,value:r}),error:r=>self.postMessage({type:Fe.Error,value:r}),complete:()=>self.postMessage({type:Fe.Complete})})}catch(t){throw(t instanceof ce||t instanceof Or||t instanceof Ar||t instanceof Ot)&&self.postMessage({type:Fe.CreationError,value:{id:t.id,sourceElementId:t.elementId,targetElementId:t.elementId,connectLinesId:[],hash:"",index:-1,type:Ee.Error,value:t.message,subscribeId:null}}),t}})})();
